================================================================================
NXP：
	IMX6：
		Android 4.3
		Kernel version：3.0.35
	IMX8：
		Android O
		Kernel version：4.9.105

		Android P
		Kernel version：4.14.62

MTK：
	Android 5.1
	Kernel version：3.10.65
================================================================================
Gerrit网址：
	http://10.1.55.31:8088/#/dashboard/self

版本服务器：
	ftp://10.1.55.31/geely/
	账号：download
	密码：geely

E01代码下载：
         repo init -u ssh://qinxb@10.1.55.31:29418/E01_0308/platform/manifest -b e01_trunk
         repo sync -c -j4

编译环境：
	android版本为：5.1
	sudo apt-get install sudo apt-get install openjdk-7-jdk gperf libxml2-utils make python-networkx zlib1g-dev:i386 zip build-essential flex mingw32 tofrodos libswitch-perl

编译方法：
       source build/envsetup.sh
       lunch full_bx11_qj_1wk-user
       make update-api –j8 && make –j8

Geely MTK BSP资料及硬件相关资料(Block图)，均放到了下述路径。大家先看一下，熟悉一下硬件及代码。
	\\10.1.74.159\qinxb\work\share\MTK资料


================================================================================

代码下载：

环境配置：
	基于android 4.3的编译环境，安装下述包，即可编译mtk的android 5.1
	sudo apt-get install sudo apt-get install  openjdk-7-jdk gperf libxml2-utils make python-networkx zlib1g-dev:i386 zip build-essential flex mingw32 tofrodos libswitch-perl
	
	android 4.3需要jdk为1.6
	android 5.1 需要jdk为1.7
	编译不同的代码，手动切换一下jdk版本即可。

	安装make 3.8.1
	https://ftp.gnu.org/gnu/make/   
	下载make-3.81.tar.gz
	解压
		cd
		./configure
		make
		sudo make install
	
相关资料：
	Geely MTK BSP资料及硬件相关资料(Block图)，均放到了下述路径。大家先看一下，熟悉一下硬件及代码。
	\\10.1.74.159\qinxb\work\share\MTK资料

SVN路径：
	之前给大家单独COPY了软件资料，现已上传至SVN
	http://10.1.55.2/svn/MP_Management/ManagementLibrary/GeelyCommon/02.Conception/吉利文档/04.功能协议文档/SX/20181210 和芯星通UM220-INS/软件资料.zip

	祝工作顺利！

================================================================================
编译系统：
device/pvetec/emx8816aa/full_emx8816aa.mk

	MTK_TARGET_PROJECT=device/pvetec

	ifeq ($(TARGET_BUILD_VARIANT), eng)
		KERNEL_DEFCONFIG ?= emx8816aa_debug_defconfig
	else
		KERNEL_DEFCONFIG ?= emx8816aa_defconfig
	endif

	PRELOADER_TARGET_PRODUCT ?= emx8816aa
	LK_PROJECT ?= emx8816aa

	PRODUCT_MANUFACTURER := alps
	PRODUCT_NAME := full_emx8816aa
	PRODUCT_DEVICE := emx8816aa
	PRODUCT_MODEL := emx8816aa
	PRODUCT_POLICY := android.policy_phone
	PRODUCT_BRAND := alps

pvetec/emx8816aa/BoardConfig.mk
	include device/mediatek/mt6735/BoardConfig.mk
	include device/mediatek/common/BoardConfig.mk

	include device/pvetec/$(MTK_TARGET_PROJECT)/ProjectConfig.mk

device/mediatek/mt6735/BoardConfig.mk

	TARGET_ARCH := arm64
	TARGET_ARCH_VARIANT := armv8-a
	TARGET_CPU_ABI := arm64-v8a
	TARGET_CPU_ABI2 :=
	TARGET_CPU_VARIANT := cortex-a53
	TARGET_CPU_SMP := true

	TARGET_2ND_ARCH := arm
	TARGET_2ND_ARCH_VARIANT := armv7-a-neon
	TARGET_2ND_CPU_ABI := armeabi-v7a
	TARGET_2ND_CPU_ABI2 := armeabi
	TARGET_2ND_CPU_VARIANT := cortex-a53

	TARGET_TOOLCHAIN_ROOT := prebuilts/gcc/$(HOST_PREBUILT_TAG)/aarch64/cit-aarch64-linux-android-4.9
	TARGET_TOOLS_PREFIX := $(TARGET_TOOLCHAIN_ROOT)/bin/aarch64-linux-android-

	KERNEL_CROSS_COMPILE:= $(abspath $(TOP))/$(TARGET_TOOLS_PREFIX)

	ARCH_ARM_HAVE_TLS_REGISTER := true
	TARGET_BOARD_PLATFORM ?= mt6735
	TARGET_USERIMAGES_USE_EXT4 := true
	TARGET_NO_FACTORYIMAGE := true
	KERNELRELEASE := 3.4

pvetec/emx8816aa/ProjectConfig.mk
	配置了各种MK宏

device/mediatek/mt6735/BoardConfig.mk

	# mkbootimg header, which is used in LK

	BOARD_KERNEL_BASE = 0x40000000
	BOARD_KERNEL_OFFSET = 0x00080000
	BOARD_RAMDISK_OFFSET = 0x04000000

	BOARD_TAGS_OFFSET = 0xE000000

	BOARD_KERNEL_CMDLINE = bootopt=64S3,32S1,32S1
	BOARD_MKBOOTIMG_ARGS := --kernel_offset $(BOARD_KERNEL_OFFSET) --ramdisk_offset $(BOARD_RAMDISK_OFFSET) --tags_offset $(BOARD_TAGS_OFFSET)

	# Add MTK compile options to wrap MTK's modifications on AOSP.
	COMMON_GLOBAL_CFLAGS += -DMTK_AOSP_ENHANCEMENT
	COMMON_GLOBAL_CPPFLAGS += -DMTK_AOSP_ENHANCEMENT

	# ptgen
	MTK_PTGEN_CHIP := $(shell echo $(TARGET_BOARD_PLATFORM) | tr '[a-z]' '[A-Z]')
	include device/mediatek/build/build/tools/ptgen/$(MTK_PTGEN_CHIP)/ptgen.mk


build/core/Makefile
	INSTALLED_BOOTIMAGE_TARGET := $(PRODUCT_OUT)/boot.img
	INSTALLED_BOOTLOADER_MODULE := $(PRODUCT_OUT)/bootloader

	BOARD_KERNEL_CMDLINE = bootopt=64S3,32N2,64N2

	INTERNAL_BOOTIMAGE_ARGS ="--kernel out/target/product/emx8816aa/kernel --ramdisk out/target/product/emx8816aa/ramdisk.img --cmdline "bootopt=64S3,32N2,64N2" --base 0x40000000 --ramdisk_offset 0x04000000 --kernel_offset 0x00080000 --tags_offset 0xE000000 --board 1544682395"

Kernel config file:
	pvetec/emx8816aa/full_emx8816aa.mk:40:KERNEL_DEFCONFIG ?= emx8816aa_defconfig
		arch/arm64/configs/emx8816aa_defconfig
		arch/arm64/configs/emx8816aa_debug_defconfig

DTS:
	arch/arm64/configs/emx8816aa_debug_defconfig:302:CONFIG_BUILD_ARM64_APPENDED_DTB_IMAGE_NAMES="emx8816aa"
	arch/arm64/configs/emx8816aa_defconfig:301:CONFIG_BUILD_ARM64_APPENDED_DTB_IMAGE_NAMES="emx8816aa"
		arch/arm64/boot/dts/emx8816aa.dts

	KERNEL_ZIMAGE_OUT := $(KERNEL_OUT)/arch/$(TARGET_ARCH)/boot/Image.gz-dtb

	kernel-3.10/arch/arm64/boot/Makefile
		$(obj)/Image.gz-dtb: $(obj)/Image.gz $(DTB_OBJS) FORCE
			$(call if_changed,cat)

PRELOADER:
	mediatek/build/build/makemtk.mk:118:PRELOADER_IMAGES := mediatek/preloader/bin/preloader_emx8816aa.bin
	mediatek/build/build/makemtk.mk



Audio Hal:
	vendor/mediatek/proprietary/platform/mt6735/hardware/audio

编译连接参数：
	TARGET_GLOBAL_CFLAGS：很重要
================================================================================
重要的镜像文件：

MTK bootloader：
	Pre-loader -》lk主要干的事情：

	1、初始化DRAM等必须硬件;
	2、与flashtool USB握手，download 相关检测 & sec boot检测；
	3、将lk载入DRAM，若实现了EL3则把atf载入内存;
	4、跳转到lk，若实现了EL3，则先跳转到atf，初始化atf后再跳转回lk初始化；

	lk -》 kernel 主要干的事情：
	1、打开MMU,使能I/D-cache，加速lk执行，显示logo、充电相关；
	2、从emmc中boot分区取出boot.img解压，将根文件系统（ramdisk）、zImage load到DRAM；
	3、解析dtb，写入到DRAM指定区域；
	4、关闭MMU、irq / fiq，关闭I/D-cache, 拉起 kernel;

	来源：CSDN
	原文：https://blog.csdn.net/forever_2015/article/details/53047993



preloader:
	作用：
		Pre-loader主要干的事情就是初始化某些硬件，比如： UART,GPIO,DRAM,TIMER,RTC,PMIC 等等，建立起最基本的运行环境,最重要的就是初始化DRAM.

		main 函数小结：
			1、各种硬件初始化(uart、pmic、wdt、timer、mem..)；
			2、获取系统启动模式等，保存在全局变量中；
			3、Security check，跟secro.img相关；
			4、如果系统已经实现el3，则进入tz初始化；
			5、获取lk加载到DRAM的地址（固定值）,然后从ROM中找到lk分区的地址， 如果没找到jump_addr，则 goto error；
			6、battery check，如果没有电池就会陷入while(1);
			7、jump到lk(如果有实现el3，则会先jump到el3，然后再回到lk)


	配置文件：包括uart配置，ATF，SDRAM等，启动信息；
		bootable/bootloader/preloader/platform/mt6735/default.mak

	参考下述MTK preloader资料：
		https://blog.csdn.net/forever_2015/article/details/53000643

	入口函数：
		bootable/bootloader/preloader/platform/mt6735/src/core/main.c

	编译命令：
		make -C bootable/bootloader/preloader -s -f Makefile  PRELOADER_OUT=/home/qinxb/work/geely/mtk/Ecarx-Android-5.1-E01-v1.0/out/target/product/emx8816aa/obj/PRELOADER_OBJ MTK_PROJECT=emx8816aa TOOL_PATH=/home/qinxb/work/geely/mtk/Ecarx-Android-5.1-E01-v1.0/device/mediatek/build/build/tools ROOTDIR=/home/qinxb/work/geely/mtk/Ecarx-Android-5.1-E01-v1.0

	编译配置：
	device/pvetec/emx8816aa/full_emx8816aa.mk
		PRELOADER_TARGET_PRODUCT ?= emx8816aa
		LK_PROJECT ?= emx8816aa

	start to parse fig file!
	===========================================
	Platform Feature:
	CFG_FPGA_PLATFORM= 0
	CFG_EVB_PLATFORM= 0
	CFG_BATTERY_DETECT= 1
	CFG_PMT_SUPPORT=
	===========================================
	Communication Feature:
	CFG_UART_TOOL_HANDSHAKE= 0
	CFG_USB_TOOL_HANDSHAKE= 1
	CFG_USB_DOWNLOAD= 1
	CFG_LOG_BAUDRATE= 921600
	CFG_META_BAUDRATE= 115200
	CFG_UART_LOG= UART1
	CFG_UART_META= UART1
	CFG_EMERGENCY_DL_SUPPORT= 1
	CFG_EMERGENCY_DL_TIMEOUT_MS= 1000*5
	CFG_USB_UART_SWITCH= 1
	===========================================
	CFG_LOAD_AP_ROM= 0
	CFG_LOAD_MD_ROM= 0
	CFG_LOAD_MD_RAMDISK= 0
	CFG_LOAD_CONN_SYS= 0
	CFG_UBOOT_MEMADDR= 0x41E00000
	CFG_AP_ROM_MEMADDR= 0x62000000
	CFG_MD1_ROM_MEMADDR= 0x42000000
	CFG_MD1_RAMDISK_MEMADDR= 0x49CC0000
	CFG_MD2_ROM_MEMADDR= 0x42000000
	CFG_MD2_RAMDISK_MEMADDR= 0x43400000
	CFG_CONN_SYS_MEMADDR= 0x45A00000
	ONEKEY_REBOOT_NORMAL_MODE_PL= 1
	KPD_USE_EXTEND_TYPE= 0
	KPD_PMIC_LPRST_TD= 1
	MTK_PMIC_RST_KEY=
	CFG_ATF_SUPPORT= 1
	CFG_ATF_LOG_SUPPORT= 1
	CFG_TEE_SUPPORT= 0
	CFG_TRUSTONIC_TEE_SUPPORT= 0
	CFG_TEE_SECURE_MEM_PROTECTED= 1
	CFG_TEE_TRUSTED_APP_HEAP_SIZE= 0xA00000
	MTK_EFUSE_WRITER_SUPPORT= no

lk:
	编译命令：
		make -C bootable/bootloader/lk   BOOTLOADER_OUT=/home/qinxb/work/geely/mtk/Ecarx-Android-5.1-E01-v1.0/out/target/product/emx8816aa/obj/BOOTLOADER_OBJ ROOTDIR=/home/qinxb/work/geely/mtk/Ecarx-Android-5.1-E01-v1.0 emx8816aa

	编译配置：
	device/pvetec/emx8816aa/full_emx8816aa.mk
		PRELOADER_TARGET_PRODUCT ?= emx8816aa
		LK_PROJECT ?= emx8816aa

	代码解析：
		入口函数：
		bootable/bootloader/lk/kernel/main.c

	kmain 小结：
		1.初始化线程池，建立线程管理链表、运行队列等；
		2.初始化各种平台硬件，包括irq、timer，wdt，uart，led，pmic，i2c，gpio等，建立lk基本运行环境；
		3.初始化内核heap、内核timer等；
		4.创建系统初始化主线程，进入bootstrap2执行，使能中断，当前线程进入idle;

		来源：CSDN
		原文：https://blog.csdn.net/forever_2015/article/details/53047993


boot.img
	编译命令：
		make -C kernel-3.10 O=/home/qinxb/work/geely/mtk/Ecarx-Android-5.1-E01-v1.0/out/target/product/emx8816aa/obj/KERNEL_OBJ ARCH=arm64             CROSS_COMPILE=/home/qinxb/work/geely/mtk/Ecarx-Android-5.1-E01-v1.0/prebuilts/gcc/linux-x86/aarch64/cit-aarch64-linux-android-4.9/bin/aarch64-linux-android- ROOTDIR=/home/qinxb/work/geely/mtk/Ecarx-Android-5.1-E01-v1.0 emx8816aa_defconfig

		注意：make xxx_defconfig生成的.config可以直接make zImage，相当于copy mini2440_defconfig .config再执行make menuconfig的效果。

		参考文档：
		https://blog.csdn.net/kangear/article/details/39553337

		OBJCOPY arch/arm64/boot/Image
		DTC     arch/arm64/boot/dts/emx8816aa.dtb
		GZIP    arch/arm64/boot/Image.gz
		CAT     arch/arm64/boot/Image.gz-dtb

	Kernel配置文件：
		pvetec/emx8816aa/full_emx8816aa.mk:40:KERNEL_DEFCONFIG ?= emx8816aa_defconfig
			arch/arm64/configs/emx8816aa_defconfig
			arch/arm64/configs/emx8816aa_debug_defconfig

bootlogo：
	logo.bin生成过程：
		1.path:
			dev/logo/ecarx1080p/ecarx1080p_uboot.bmp

		2.将.bmp图片转换成.raw文件
			命令：
			$dev/logo/tool/bmp_to_raw /home/qinxb/work/geely/mtk/Ecarx-Android-5.1-E01-v1.0/out/target/product/emx8816aa/obj/BOOTLOADER_OBJ/build-emx8816aa/dev/logo/ecarx1080p/ecarx1080p_uboot.raw dev/logo/ecarx1080p/ecarx1080p_uboot.bmp

		3.将所有的.raw文件拼接为ecarx1080p.raw文件
			$dev/logo/tool/zpipe -l 9 ecarx1080p.raw ecarx1080p_uboot.raw ecarx1080p_battery.raw ecarx1080p_num_1.raw

		4.将.raw文件转换为.bin文件
			$dev/logo/../../scripts/mkimage /home/qinxb/work/geely/mtk/Ecarx-Android-5.1-E01-v1.0/out/target/product/emx8816aa/obj/BOOTLOADER_OBJ/build-emx8816aa/dev/logo/ecarx1080p.raw LOGO > /home/qinxb/work/geely/mtk/Ecarx-Android-5.1-E01-v1.0/out/target/product/emx8816aa/obj/BOOTLOADER_OBJ/build-emx8816aa/logo.bin


作用是？：
	python device/mediatek/build/build/tools/check_kernel_config.py -c device/pvetec/emx8816aa/ProjectConfig.mk -l bootable/bootloader/lk/  project/emx8816aa.mk -p emx8816aa
	python device/mediatek/build/build/tools/check_kernel_config.py -c device/pvetec/emx8816aa/ProjectConfig.mk -b bootable/bootloader/  preloader/custom/emx8816aa/emx8816aa.mk -p emx8816aa
	python device/mediatek/build/build/tools/check_kernel_config.py -c device/pvetec/emx8816aa/ProjectConfig.mk -k kernel-3.10/arch/arm64/  configs/emx8816aa_defconfig -p emx8816aa

作用是？：
	python ./build/tools/releasetools/rootcheck.py out/target/product/emx8816aa/system out/target/product/emx8816aa/lk.bin out/target/product/emx8816aa/recovery.img out/target/product/emx8816aa/boot.img out/target/product/emx8816aa/logo.bin out/target/product/emx8816aa/system/data

================================================================================
MTK资源情况：
	已知：
	uart: 4路
		
		Uart：
			drivers/misc/mediatek/uart/uart.c
		
		DTS：
			AP_UART1@0x11003000
			AP_UART2@0x11004000
			AP_UART3@0x11005000
			AP_UART4@0x1100D000
		
		使用情况：
			串口1：
				/dev/ttyMT0 : 串口log 波特率为：921600n1
			
			串口2：
				/dev/ttyMT1 :  RPC
				
			串口3：
				未使用；与FPGA公用端子
			
			串口4：
				预留
	
	I2S : 4路，2出2入
		I2S0：master or slave ：输入
			参考音录入：
		
		I2S1：master ：输出
			未使用；与DPI端子公用
		I2S2：master ：输入
			MIC录入：
		
		I2S3：master ：输出
			主声道
	
	
	SPI ：1路

================================================================================
E01 MTK 代码下载：
	repo init -u ssh://qinxb@10.1.55.31:29418/E01_0308/platform/manifest -b e01_trunk
	repo sync

JDK配置:
	sudo add-apt-repository ppa:openjdk-r/ppa 
	sudo apt-get update 
	sudo apt-get install openjdk-7-jdk

================================================================================

Android SELinux Enforing 和 Permissive 模式切换
	1、Running mode
	adb shell setenforce 1       // Enforing
	adb shell setenforce 0       // Permissive 

	2、Build mode：
	Ref  file ：  system\core\init\Android.mk  增加定义
	         LOCAL_CFLAGS += -DALLOW_DISABLE_SELINUX=1

	3. adb shell getenforce
	result : permissive 

================================================================================
MTK启动模式：

设备文件：
	/sys/class/BOOT/BOOT/boot/boot_mode

启动类型：
	MT_FACTORY_BOOT
	MT_ATE_FACTORY_BOOT
		factory_init.rc
		factory_init.project.rc
	
	
	MT_META_BOOT
		meta_init.rc
		meta_init.project.rc

================================================================================
Audio：
	// I2S1
    MT_SOC_DL1_PCM@0x11220000 {
            compatible = "mediatek,mt_soc_pcm_dl1";
            reg = <0x11220000 0x1000>;
            interrupts = <0 144 0x8>;
            audclk-gpio = <143 0>;
            audmiso-gpio = <144 0>;
            audmosi-gpio = <145 0>;
            vowclk-gpio = <148 0>;
            extspkamp-gpio = <129 0>;
            extspkamp_2-gpio = <128 0>;
            rcvspkswitch-gpio = <120 0>;
            i2s1clk-gpio = <135 0>;
            i2s1dat-gpio = <137 0>;
            i2s1mclk-gpio = <134 0>;
            i2s1ws-gpio = <136 0>;
    };

	
	代码：
	
		dai_list：保存系统中注册的所有dai（cpu dai，codec dai）
				注册方法：
					snd_soc_register_component  -> snd_soc_register_dais -> snd_soc_register_dai
					snd_soc_register_codec -> snd_soc_register_dais -> snd_soc_register_dai
					
		codec_list:保存系统中注册的所有codec
				注册方法：
					snd_soc_register_codec
		platform_list：保存系统中注册的所有platform
				注册方法：
					snd_soc_register_platform
		
		audio系统中的platform如何理解？
		
		sound/soc/mediatek/mt_soc_audio_v3
		
		Machine:
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_machine.c
			注册platpform device（name=“soc-audio”）
		sound/soc/soc-core.c
			注册platform driver（name="soc-audio"）
			调用probe函数
				snd_soc_register_card(snd_soc_card card) //snd_soc_card card在mt_soc_machine.c里定义
					根据dai-link的数量申请相同数量的rtd
					card->rtd = devm_kzalloc(card->dev,sizeof(struct snd_soc_pcm_runtime) *(card->num_links + card->num_aux_devs)
					实例化声卡：
					snd_soc_instantiate_card(card)
						绑定每个dai-link中的dai：也就是将系统中注册的cpu-dai，codec及codec-dai，platform均保存到相应的rtd中
						soc_bind_dai_link(card, i)
						check每个dai-link的aux设备
						soc_check_aux_dev(card, i)
						initialize the register cache for each available codec：
						snd_soc_init_codec_cache(codec, compress_type)  ？？？不太理解，
						create and initialize a soundcard structure：
						ret = snd_card_create(SNDRV_DEFAULT_IDX1, SNDRV_DEFAULT_STR1,card->owner, 0, &card->snd_card);
							创建control device
							snd_ctl_create(card) ：
								snd_device_new
							创建infor
							snd_info_card_create(card)
							
			注册声卡：
				out：数据输出 	
				Debugfs:
				/sys/kernel/debug/mtksocaudio
				
				in ：模拟输入
				Debugfs:
				/sys/kernel/debug/mtksocanaaudio
				
				static char ParSetkeyAfe[] = "Setafereg";
				static char ParSetkeyAna[] = "Setanareg";
				static char ParSetkeyCfg[] = "Setcfgreg";
				static char PareGetkeyAfe[] = "Getafereg";
				static char PareGetkeyAna[] = "Getanareg";
		sound/soc/mediatek/mt_soc_audio_v3
		sound/soc/mediatek/mt_soc_audio_v3
		sound/soc/mediatek/mt_soc_audio_v3
		sound/soc/mediatek/mt_soc_audio_v3
		sound/soc/mediatek/mt_soc_audio_v3
		
		
		
		sound/soc/mediatek/mt_soc_audio_v3/AudDrv_Def.h
		
		
		Capture:
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_tdm_capture.c
		
		Platform:
		
		Codec:
		
		
	采样率：
		48k
		
		
	I2S:
	I2S为三线总线，3个信号分别为：
		①串行时钟SCK，也叫位时钟（BCK）。即每发送1位数字音频数据，SCK上都有1个脉冲。SCK的频率=2×采样频率×采样位数。
		在数据传输过程中，I2S总线的发送器和接收器都可以作为系统的主机来提供系统的时钟频率。
		② 帧时钟WS，即命令（声道）选择，用于切换左右声道的数据。WS的频率等于采样频率，由系统主机提供。WS为“1”表示传输的是左声道的数据，WS为“0”表示传输的是右声道的数据。
		③ 串行数据信号SD，用于传输二进制补码表示的音频数据。
		I2S格式的信号无论有多少位有效数据，数据位的最高位（MSB）总是被最先传输，1次能够发送的数据决定于I2S格式的有效位数。
		随着技术的发展，在统一的I2S接口下出现了多种不同的数据格式。根据SD信号相对于SCK和WS位置的不同，分为左对齐和右对齐2种格式
		在上面2种数据传输格式中，当WS为“1”时传输的是左声道的数据，当WS为“0”时传输的是右声道的数据。为了保证数字音频信号的正确传输，发送端和接收端必须采用相同的数据格式。

		介绍：
		https://blog.csdn.net/u010783226/article/details/82708282
		
	Android部分path设置：
		device/mediatek/mt6735/audio_device.xml
		
		<path name="ext_speaker_output" value="turnon">                 
		<kctl name="Ext_Speaker_Amp_Switch" value="On" />
		</path>
		
		<path name="speaker_output" value="turnon">
			<kctl name="Speaker_Amp_Switch" value="On" />
		</path>
		<path name="speaker_output" value="turnoff">
			<kctl name="Speaker_Amp_Switch" value="Off" />
		</path>
	
	
----------------------------------------------------------------------------------------------------------------------------	
	
	代码解析：
	Ecarx主声道：
		
		I2S通道：
			I2S1
		
		端子定义为：
			20  GPIO5	I2S1_DO
			21	GPIO6	I2S1_LRCK
			22	GPIO7	I2S1_BCK		
		
		DTS节点：
			    {
					.name = "MultiMedia1",
					.stream_name = MT_SOC_DL1_STREAM_NAME,
					.cpu_dai_name   = MT_SOC_DL1DAI_NAME,
					.platform_name  = MT_SOC_DL1_PCM,
					.codec_dai_name = "ak7738-aif2",
					.codec_name = "ak7738.3-0018",
					.init = mt_soc_audio_init,
					.ops = &mt_machine_audio_ops,
				},
		代码流程：
			stream_name：
				sound/soc/mediatek/mt_soc_audio_v3/mt_soc_dai_stub.c:102:            .stream_name = MT_SOC_DL1_STREAM_NAME,
				sound/soc/mediatek/mt_soc_audio_v3/mt_soc_codec_dummy.c:113:            .stream_name = MT_SOC_DL1_STREAM_NAME,
				sound/soc/mediatek/mt_soc_audio_v3/mt_soc_machine.c:639:        .stream_name = MT_SOC_DL1_STREAM_NAME,
				sound/soc/mediatek/mt_soc_audio_v3/mt_soc_codec_63xx.c:1061:            .stream_name = MT_SOC_DL1_STREAM_NAME,
				sound/soc/mediatek/mt_soc_audio_v3/AudDrv_Def.h:305:#define MT_SOC_DL1_STREAM_NAME "MultiMedia1_PLayback"
			
			cpu_dai_name：
			
					MT_SOC_DAI_NAME@0x11220000 {
						compatible = "mediatek,mt_soc_dai_stub";
					};
			
				sound/soc/mediatek/mt_soc_audio_v3/mt_soc_dai_stub.c:110:        .name = MT_SOC_DL1DAI_NAME,
				sound/soc/mediatek/mt_soc_audio_v3/mt_soc_machine.c:640:        .cpu_dai_name   = MT_SOC_DL1DAI_NAME,
				sound/soc/mediatek/mt_soc_audio_v3/AudDrv_Def.h:195:#define MT_SOC_DL1DAI_NAME "mt-soc-dl1dai-driver"
			
			platform_name:
			
						MT_SOC_DL1_PCM@0x11220000 {
							compatible = "mediatek,mt_soc_pcm_dl1";
							reg = <0x11220000 0x1000>;
							interrupts = <0 144 0x8>;
							audclk-gpio = <143 0>;
							audmiso-gpio = <144 0>;
							audmosi-gpio = <145 0>;
							vowclk-gpio = <148 0>;
							extspkamp-gpio = <117 0>;
							i2s1clk-gpio = <80 0>;
							i2s1dat-gpio = <78 0>;
							i2s1mclk-gpio = <9 0>;
							i2s1ws-gpio = <79 0>;
						};

				sound/soc/mediatek/mt_soc_audio_v3/mt_soc_pcm_dl1.c:703:        dev_set_name(&pdev->dev, "%s", MT_SOC_DL1_PCM);
				sound/soc/mediatek/mt_soc_audio_v3/mt_soc_pcm_dl1.c:1111:        .name = MT_SOC_DL1_PCM,
				sound/soc/mediatek/mt_soc_audio_v3/mt_soc_pcm_dl1.c:1134:    soc_mtkafe_dev = platform_device_alloc(MT_SOC_DL1_PCM, -1);
				sound/soc/mediatek/mt_soc_audio_v3/mt_soc_machine.c:641:        .platform_name  = MT_SOC_DL1_PCM,
				sound/soc/mediatek/mt_soc_audio_v3/AudDrv_Def.h:228:#define MT_SOC_DL1_PCM   "mt-soc-dl1-pcm"
			codec_dai_name:
			codec_name：
		
	Ecarx MIC1：
	
		I2S通路：
			I2S0
		
		端子定义：
			14	GPIO61 I2S0_BCK
			13	GPIO62 I2S0_LRCK
			11	GPIO63 I2S0_DI

	
		DTS节点：
		代码流程：
			machine:
				    {
						.name = "MultiMedia2",
						.stream_name = MT_SOC_UL1_STREAM_NAME,
						.cpu_dai_name   = MT_SOC_UL1DAI_NAME,
						.platform_name  = MT_SOC_UL1_PCM,
						.codec_dai_name = "ak7738-aif3",
						.codec_name = "ak7738.3-0018",
						.init = mt_soc_audio_init,
						.ops = &mt_machine_audio_ops,
					},
					
			platform_name:
				DTS：
					MT_SOC_UL1_PCM@0x11220000 {
						compatible = "mediatek,mt_soc_pcm_capture";
					};
				
				mt_soc_pcm_capture.c:815:    { .compatible = "mediatek,mt_soc_pcm_capture", },
			
			cpu_dai_name：
			codec_dai_name:
			codec_name：
			
			Soc_Aud_I2S_SRC_MASTER_MODE = 0,
			Soc_Aud_I2S_SRC_SLAVE_MODE = 1
			
			AudDrv_Clk_On：
			        if (enable_clock(MT_CG_INFRA_AUDIO, "AUDIO"))
					{
						PRINTK_AUD_CLK("%s Aud enable_clock MT_CG_INFRA_AUDIO fail", __func__);
					}
					if (enable_clock(MT_CG_AUDIO_AFE, "AUDIO"))
					{
						PRINTK_AUD_CLK("%s Aud enable_clock MT_CG_AUDIO_AFE fail", __func__);
					}
					if (enable_clock(MT_CG_AUDIO_DAC, "AUDIO"))
					{
						PRINTK_AUD_CLK("%s MT_CG_AUDIO_DAC fail", __func__);
					}
					if (enable_clock(MT_CG_AUDIO_DAC_PREDIS, "AUDIO"))
					{
						PRINTK_AUD_CLK("%s MT_CG_AUDIO_DAC_PREDIS fail", __func__);
					}
			
			
	Ecarx参考音通道：
	
		I2S通道：
			I2S2
		
		端子定义：
			15	I2S2_DI	     GPIO78
			17	I2S2_LRCK    GPIO79
			18	I2S2_BCK     GPIO80

		DTS节点：
		代码流程：
			platform_name:
			cpu_dai_name：
			codec_dai_name:
			codec_name：
		
	
	
	
	
----------------------------------------------------------------------------------------------------------------------------
	audio 播放：
		codec做从设备：
		soc做主设备：（提供clk，函数调用：AudDrv_Clk_On()）
		pcmC0D8p        I2S0DL1_PLayback
				{
					.name = "I2S0DL1OUTPUT",
					.stream_name = MT_SOC_I2SDL1_STREAM_NAME,
					.cpu_dai_name   = MT_SOC_I2S0DL1_NAME,
					.platform_name  = MT_SOC_I2S0DL1_PCM,
					.codec_dai_name = MT_SOC_CODEC_I2S0TXDAI_NAME,
					.codec_name = MT_SOC_CODEC_NAME,
					.init = mt_soc_audio_init,
					.ops = &mt_machine_audio_ops,
				},
				
	stream_name：
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_dai_stub.c:330:            .stream_name = MT_SOC_I2SDL1_STREAM_NAME,
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_machine.c:719:        .stream_name = MT_SOC_I2SDL1_STREAM_NAME,
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_codec_63xx.c:1102:            .stream_name = MT_SOC_I2SDL1_STREAM_NAME,
		sound/soc/mediatek/mt_soc_audio_v3/AudDrv_Def.h:316:#define MT_SOC_I2SDL1_STREAM_NAME "I2S0DL1_PLayback"
		
	cpu_dai_name：
		DTS：
			MT_SOC_DAI_NAME@0x11220000 {
				compatible = "mediatek,mt_soc_dai_stub";
			};
		
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_dai_stub.c:338:        .name = MT_SOC_I2S0DL1_NAME,
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_machine.c:720:        .cpu_dai_name   = MT_SOC_I2S0DL1_NAME,
		
		
	platform_name：（mt-soc-i2s0dl1-pcm）
		DTS：
			MT_SOC_I2S0DL1_PCM@0x11220000 {
				compatible = "mediatek,mt_soc_pcm_dl1_i2s0Dl1";
			};
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_pcm_dl1_i2s0Dl1.c:749:        dev_set_name(&pdev->dev, "%s", MT_SOC_I2S0DL1_PCM);
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_pcm_dl1_i2s0Dl1.c:797:        .name = MT_SOC_I2S0DL1_PCM,
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_pcm_dl1_i2s0Dl1.c:816:    soc_mtkI2S0dl1_dev = platform_device_alloc(MT_SOC_I2S0DL1_PCM, -1);
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_machine.c:721:        .platform_name  = MT_SOC_I2S0DL1_PCM,
		sound/soc/mediatek/mt_soc_audio_v3/AudDrv_Def.h:243:#define MT_SOC_I2S0DL1_PCM  "mt-soc-i2s0dl1-pcm"
		arch/arm64/boot/dts/mt6735.dtsi:1037:		MT_SOC_I2S0DL1_PCM@0x11220000 {
		
		代码解析：
			支持的采样率：constraints_sample_rates
			Open函数：
				提供CLK：
				AudDrv_Clk_On()
			Close函数：
				mtk_pcm_I2S0dl1_close
				1.	stop DAC output
				2.	stop I2S output
				
				I2S格式：I2S，位数为32位
				Format：32
				
			Prepare：
				
				
	codec_dai_name：（mt-soc-codec-I2s0tx-dai）
		
		DTS：
				MT_SOC_CODEC_NAME@0x11220000 {
					compatible = "mediatek,mt_soc_codec_63xx";
				};
				//内部DSP：PMIC+audio codec：芯片型号：MT6328V
		
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_machine.c:722:        .codec_dai_name = MT_SOC_CODEC_I2S0TXDAI_NAME,
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_codec_63xx.c:1099:        .name = MT_SOC_CODEC_I2S0TXDAI_NAME,
		sound/soc/mediatek/mt_soc_audio_v3/AudDrv_Def.h:272:#define MT_SOC_CODEC_I2S0TXDAI_NAME "mt-soc-codec-I2s0tx-dai"
		
		
		codec_name： （mt-soc-codec）
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_machine.c:663:        .codec_name = MT_SOC_CODEC_NAME,
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_machine.c:683:        .codec_name = MT_SOC_CODEC_NAME,
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_machine.c:703:        .codec_name = MT_SOC_CODEC_NAME,
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_machine.c:723:        .codec_name = MT_SOC_CODEC_NAME,
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_machine.c:793:        .codec_name = MT_SOC_CODEC_NAME,
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_machine.c:823:        .codec_name = MT_SOC_CODEC_NAME,
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_machine.c:853:        .codec_name = MT_SOC_CODEC_NAME,
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_machine.c:863:        .codec_name = MT_SOC_CODEC_NAME,
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_codec_63xx.c:4975:        dev_set_name(&pdev->dev, "%s", MT_SOC_CODEC_NAME);
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_codec_63xx.c:5003:        .name = MT_SOC_CODEC_NAME,
		sound/soc/mediatek/mt_soc_audio_v3/mt_soc_codec_63xx.c:5022:    soc_mtk_codec6331_dev = platform_device_alloc(MT_SOC_CODEC_NAME, -1);
		sound/soc/mediatek/mt_soc_audio_v3/AudDrv_Def.h:289:#define MT_SOC_CODEC_NAME "mt-soc-codec"
		arch/arm64/boot/dts/mt6735.dtsi:1093:		MT_SOC_CODEC_NAME@0x11220000 {
		
----------------------------------------------------------------------------------------------------------------------------		
		
		mic：
		pcmC0D1c1               MultiMedia2_Capture
			    {
					.name = "MultiMedia1",
					.stream_name = MT_SOC_DL1_STREAM_NAME,
					.cpu_dai_name   = MT_SOC_DL1DAI_NAME,
					.platform_name  = MT_SOC_DL1_PCM,
					.codec_dai_name = "ak7738-aif2",
					.codec_name = "ak7738.3-0018",
					.init = mt_soc_audio_init,
					.ops = &mt_machine_audio_ops,
				},
				
				
				{
					.name = "I2S0_AWB_CAPTURE",
					.stream_name = MT_SOC_I2S0AWB_STREAM_NAME,
					.cpu_dai_name   = MT_SOC_I2S0AWBDAI_NAME,
					.platform_name  = MT_SOC_I2S0_AWB_PCM,
					.codec_dai_name = "ak7738-aif4",
					.codec_name = "ak7738.3-0018",
					.init = mt_soc_audio_init,
					.ops = &mt_machine_audio_ops,
				},
				
			
		参考音：                     DL1_AWB_Record
		
		
		Ecar回复：
		1.播放：
			tinyplay /sdcard/sine.wav             //don't work
			tinyplay 1.wav
			2.录音：
			//mic：
			tinycap  cap1.wav -D 0 -d 1 -r 48000   //work
			//参考音
			tinycap  cap2.wav -D 0 -d 16 -r 48000  //don't work
			
			
			cat /proc/asound/card0/pcm0p/sub0/hw_params
			
		2.根据Ecarx确认的结果推测：
			主声道设备：/dev/snd/pcmC0D0p
			录音设备1:  /dev/snd/pcmC0D1c
			录音设备2： /dev/snd/pcmC0D16c
			
================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

关于MTK Audio的疑问:是什么？		
			AFE_VUL
			AFE_DAC
			AFE_I2S
			AFE_MRGIF
			AFE_DL1
			AFE_DL2
			AFE_AWB
			AFE_DAI
			
			VUL/DL1/DL2/AWB
================================================================================
FB：
    MTKFB@5e200000 {
            compatible = "mediatek,MTKFB";
            reg = <0x5F000000 0x1000000>;
    };
================================================================================
UART：
    AP_DMA_UART0_RX@0x11000400 {
            compatible = "mediatek,AP_DMA_UART0_RX";
            reg = <0x11000400 0x80>;
            interrupts = <0 104 0x8>;
    };

    AP_DMA_UART1_TX@0x11000480 {
            compatible = "mediatek,AP_DMA_UART1_TX";
            reg = <0x11000480 0x80>;
            interrupts = <0 105 0x8>;
    };


================================================================================
I2C：
	驱动：
		misc/mediatek/i2c/mt6735/i2c.c
	DTS节点：
		I2C0@0x11007000 {
				compatible = "mediatek,I2C0";
				cell-index = <0>;
				reg = <0x11007000 0x1000>;
				interrupts = <0 84 0x8>,
							 <0 99 0x8>;
		};
================================================================================
SPI：
	驱动：
		misc/mediatek/spi/mt6735/spi.c
		
	DTS节点：
		SPI1@0x1100A000 {
        cell-index = <0>;
        spi-padmacro = <0>;
        compatible = "mediatek,SPI1";
        reg = <0x1100A000 0x1000>;
        interrupts = <0 118 0x8>;
		};
================================================================================
GPIO：
	drivers/misc/mediatek/mach/mt6735/emx8816aa/dct/dct/cust_gpio_boot.h
	drivers/misc/mediatek/gpio/mt6735/gpio_init.h
	
	drivers/misc/mediatek/mach/mt6735/emx8816aa/dct/dct/cust_gpio_boot.h:1015:#define GPIO119_SMT       GPIO_SMT_DISABLE
	drivers/misc/mediatek/mach/mt6735/emx8816aa/dct/dct/cust_gpio_usage.h
	
	drivers/misc/mediatek/mach/mt6735/emx8816aa/dct/dct/cust_gpio_usage.h:21:#define GPIO_CTP_EINT_PIN         (GPIO11 | 0x80000000)
	drivers/misc/mediatek/mach/mt6735/include/mach/mt_clkbuf_ctl.h:24:#define GPIO_RFIC0_BSI_CS         (GPIO110|0x80000000)
	drivers/misc/mediatek/mach/mt6735/include/mach/gpio_const.h:46:    GPIO8  , GPIO9  , GPIO10 , GPIO11 , GPIO12 , GPIO13 , GPIO14 , GPIO15 ,
	drivers/misc/mediatek/multibridge/mt6735/mt8193/inc/mt8193_gpio.h:57:	GPIO_PIN_GPIO11,
	
	drivers/misc/mediatek/gpio/mt6735/mt_gpio_debug.c
	
	./include/mach/mt_gpio_core.h
	./drivers/misc/mediatek/gpio/mt_gpio_core.c
	
DTS：
	drivers/misc/mediatek/mach/mt6735/emx8816aa/dct/dct/cust_gpio.dtsi:2294:	pinctrl-12 = <&gpio11>;
	
PINCTRL：
	drivers/misc/mediatek/mach/mt6735/emx8816aa/dct/dct/pinctrl-mtk-mt6735.h
	drivers/misc/mediatek/mach/mt6735/emx8816aa/dct/dct/mt6735-pinfunc.h
	
	
工具：
	kernel-3.10/tools/dct/DrvGen.exe

	//上拉或下拉 选择设置：
	mt_set_gpio_pull_select(COL_REG[i], 0);
	mt_set_gpio_pull_select(COL_REG[i], 1);
	//拉高(设置1), 拉低(设置0) 操作： 

	//设置输入 输出：
	mt_set_gpio_dir(u32 pin, u32 dir)  设置输入还是输出
	mt_get_gpio_dir(u32 pin)        获取输入输出的状态

	mt_set_gpio_pull_enable(u32 pin, u32 enable)  上下拉使能
	mt_get_gpio_pull_enable(u32 pin)      获取上下拉状态

	mt_set_gpio_pull_select(u32 pin, u32 select)   上拉或下拉 选择设置
	mt_get_gpio_pull_select(u32 pin)  

	mt_set_gpio_inversion(u32 pin, u32 enable) 
	mt_get_gpio_inversion(u32 pin)  

	mt_set_gpio_out(u32 pin, u32 output)  
	mt_get_gpio_out(u32 pin)   
	mt_get_gpio_in(u32 pin)     

	mt_set_gpio_mode(u32 pin, u32 mode)  
	mt_get_gpio_mode(u32 pin)    

	mt_set_clock_output(u32 num, u32 src, u32 div) 
	mt_get_clock_output(u32 num, u32 *src, u32 *div) 

    mt_set_gpio_dir(GPIO_SPEAKER_EN_PIN,GPIO_DIR_OUT); // output
    mt_set_gpio_out(GPIO_SPEAKER_EN_PIN,GPIO_OUT_ONE); // high
	
	
	
GPIO配置流程：
	drivers/misc/mediatek/gpio/mt_gpio_core.c
	
DTS：
		GPIO@0x10211000 {
			compatible = "mediatek,GPIO";
			reg = <0x10211000 0x1000>;
		};
	MISC设备节点：
		mtgpio
	GPIO PIN属性：可读，可写
		mtgpio/pin

		
MTK端子定义修改：
	1.	打开DrvGen.exe工具
			kernel-3.10/tools/dct/DrvGen.exe
	2.	打开（open）下述文件：
			kernel-3.10/drivers/misc/mediatek/mach/mt6735/emx8816aa/dct/dct/codegen.dws
	3.	点击Edit，根据端子定义书，进行端子的配置
	4.	点击save，询问是否保存时，选择否，出现warning时，选择确认
	5.	点击生成代码
	6.	将修改后的codegen.dws文件覆盖系统中其他同名文件：
		kernel-3.10/drivers/misc/mediatek/mach/mt6735/emx8816aa/dct/dct/codegen.dws
		bootable/bootloader/preloader/custom/emx8816aa/dct/dct/codegen.dws
		bootable/bootloader/lk/target/emx8816aa/dct/dct/codegen.dws
		vendor/mediatek/proprietary/custom/emx8816aa/kernel/dct/dct/codegen.dws
	7.	重新编译lk及bootimage，并进行烧写
	
	======================================================================================
	MTK Android编译命令
		make lk -j8
		make preloader -j8
		make bootimage -j8
		make recoveryimage -j8
		make systemimage -j8
	======================================================================================
	======================================================================================
	======================================================================================
	
	使用方法：
		方法1：
		GPIOMSG("cat pin  #show all pin setting\n");
		GPIOMSG("echo -wmode num x > pin #num:pin,x:the mode 0~7\n");
		GPIOMSG("echo -wpsel num x > pin #x: 1,pull-up; 0,pull-down\n");
		GPIOMSG("echo -wdout num x > pin #x: 1,high; 0, low\n");
		GPIOMSG("echo -wpen num x > pin  #x: 1,pull enable; 0 pull disable\n");
		GPIOMSG("echo -wies num x > pin  #x: 1,ies enable; 0 ies disable\n");
		GPIOMSG("echo -wdir num x > pin  #x: 1, output; 0, input\n");
		/*GPIOMSG("echo -wdinv num x > pin #x: 1, inversion enable; 0, disable\n");*/
		GPIOMSG("echo -w=num x x x x x x > pin #set all property one time\n");
		GPIOMSG("PIN: [MODE] [PSEL] [DIN] [DOUT] [PEN] [DIR] [IES]\n");
		
		echo \"-w=43:0 0 0 0 0 1 1\" > /sys/devices/virtual/misc/mtgpio/pin
		
			[wmode][wpsel][wdin][wdout][wpen][wdir][wies][*]
		比如：947的PDB使用gpio43脚
		
			控制模式：
				echo -wmode 43 0 > /sys/devices/virtual/misc/mtgpio/pin  //43:00000110
				echo -wmode 43 1 > /sys/devices/virtual/misc/mtgpio/pin  //43:10000110
				echo -wmode 43 2 > /sys/devices/virtual/misc/mtgpio/pin  //43:20000110
				echo -wmode 43 3 > /sys/devices/virtual/misc/mtgpio/pin  //43:30000110
			
			控制上拉(1)或下拉(0)：
				echo -wpsel 43 1 > /sys/devices/virtual/misc/mtgpio/pin  //43:01001110
				echo -wpsel 43 0 > /sys/devices/virtual/misc/mtgpio/pin  //43:00001110
				
			控制是否上拉使能(1:使能；0：未使能)：
				echo -wpen 43 0 > /sys/devices/virtual/misc/mtgpio/pin  //43:00000110
				echo -wpen 43 1 > /sys/devices/virtual/misc/mtgpio/pin  //43:00001110
				
			控制输入（0）/输出（1）：
				echo -wdir 43 0 > /sys/devices/virtual/misc/mtgpio/pin  //43:00000010
				echo -wdir 43 1 > /sys/devices/virtual/misc/mtgpio/pin  //43:00000110
			
			控制输出低（0）/高（1）：
				拉高拉低947的PDB：
				echo -wdout 43 0 > /sys/devices/virtual/misc/mtgpio/pin  //43:00000110
				echo -wdout 43 1 > /sys/devices/virtual/misc/mtgpio/pin  //43:00110110
			
			IES：
				echo -wies 43 0 > /sys/devices/virtual/misc/mtgpio/pin  //43:00000100
				echo -wies 43 1 > /sys/devices/virtual/misc/mtgpio/pin  //43:00000110
				
	======================================================================================
	======================================================================================
	======================================================================================
	======================================================================================
	======================================================================================
	
	方法2：
		oned_gpio_fd =open("/dev/mtgpio", O_RDWR);  
		if(oned_gpio_fd == -1)  
		{  
		LOGD("1DPower up Fail.........");  
		return -1;  
		}  
		   
		//0x15为设置pin引脚为高电平命令，85表示pin引脚  
		ioctl(oned_gpio_fd, 0x15,85);  
		   
		ioctl(oned_gpio_fd, 0x15,154);  
		ioctl(oned_gpio_fd, 0x15,150);  
		ioctl(oned_gpio_fd, 0x15,69);  
		   
		ioctl(oned_gpio_fd, 0x15,72);  
		//0x14为设置pin引脚为低电平的命令  
		ioctl(oned_gpio_fd, 0x14,78);  
		usleep(1000);  
		
	shell下调试GPIO
		//可以cat查看pin脚状态，分析gpio是否与预期值一致
		cat /sys/devices/virtual/misc/mtgpio/pin
	
	使用方式：
		https://blog.csdn.net/richu123/article/details/51212302
		
		To show GPIO status:
			adb shell "cat /sys/devicesirtual/misc/mtgpio/pin"
		To change GPIO status:
			adb shell "echo \"-w=99:0 1 0 0 0 1 0\" >/sys/devicesirtual/misc/mtgpio/pin"

		PIN:     [MODE]   [PULL_SEL]     [DIN]   [DOUT]   [PULL EN]    [DIR]   [IES]   [SMT]
		IO编号:  模式     输入上拉选择   输入值  输出值  输入上拉始能  方向     输入    翻转
		
		
	Drvgen:
	端子定义修改的效果：
		drivers/misc/mediatek/mach/mt6735/emx8816aa/dct/dct/cust_gpio.dtsi
		修改gpio的dir：由out->in
		        gpio2: gpio@2 {
                pins_cmd_dat {
                        pins = <PINMUX_GPIO2__FUNC_GPIO2>;
                        slew-rate = <1>;                   //表示GPIO的方向为IN
                        slew-rate = <0>;                   //表示GPIO的方向为OUT
						bias-enable;                      //表示关闭GPIO的上拉使能
                        bias-disable;                      //表示关闭GPIO的上拉使能
                        bias-pull-down = <00>;             //表示设置GPIO为下拉
						bias-pull-down = <11>;             //表示设置GPIO为上拉
                        output-low;						   //表示GPIO的方向为OUT，且输出低电平
						output-high;                       //表示GPIO的方向为OUT，且输出高电平
						
		-#define GPIO_CTP_EINT_PIN_M_EINT   GPIO_MODE_00
		如果设置为中断模式的话，将定义上述宏
================================================================================
Touch：
	./drivers/input/touchscreen/mediatek/TP_ti947_BIRD_C
	./drivers/input/touchscreen/mediatek/TP_ti947_BIRD_C/tp_ti947_driver.c
	./drivers/input/touchscreen/mediatek/TP_ti947_BIRD_C/Kconfig
	./drivers/input/touchscreen/mediatek/TP_ti947_BIRD_C/Makefile
	./drivers/input/touchscreen/mediatek/TP_ti947_BIRD_C/tpd_custom_ti947.h
	
	
	947touch驱动：
       框架：
              drivers/input/touchscreen/mediatek/mtk_tpd.c
              drivers/input/touchscreen/mediatek/tpd_setting.c
       驱动：
              drivers/input/touchscreen/mediatek/TP_ti947_BIRD_C/tp_ti947_driver.c
	
	
	//将该GPIO设置为中断
	mt_set_gpio_mode(11, GPIO_CTP_EINT_PIN_M_EINT);
	//设置为输入
	mt_set_gpio_dir(11, GPIO_DIR_IN);
	//设置为无上拉
	mt_set_gpio_pull_enable(11, GPIO_PULL_DISABLE);

	//注册中断：
    mt_eint_registration(11, EINTF_TRIGGER_FALLING, tpd_eint_interrupt_handler, 0);// disable auto-unmask
	
================================================================================
显示（Framebuffer）：
	驱动：
		drivers/misc/mediatek/videox/mt6735/mtkfb.c
	DTS：
		arch/arm64/boot/dts/emx8816aa.dts
	    MTKFB@5e200000 {
                compatible = "mediatek,MTKFB";
                reg = <0x5F000000 0x1000000>;
        };
	流程：
		drivers/misc/mediatek/dispsys/mt6735/ddp_dsi.c:3847:DDP_MODULE_DRIVER ddp_driver_dsi0 =
		drivers/misc/mediatek/dispsys/mt6735/ddp_info.c:169:extern DDP_MODULE_DRIVER ddp_driver_dsi0;
		drivers/misc/mediatek/dispsys/mt6735/ddp_manager.c:28:extern DDP_MODULE_DRIVER  * ddp_modules_driver[DISP_MODULE_NUM];
		

947芯片驱动：
       drivers/misc/mediatek/lcm/cpt_clap070wp03xg_sn65dsi83_ti947/cpt_clap070wp03xg_sn65dsi83_ti947.c
       drivers/misc/mediatek/lcm/cpt_clap070wp03xg_sn65dsi83_ti947/sn65dsi83_i2c.c
       drivers/misc/mediatek/lcm/cpt_clap070wp03xg_sn65dsi83_ti947/ti947_i2c.c
       
       drivers/misc/mediatek/lcm/mt65xx_lcm_list.c
       misc/mediatek/videox/mt6735/disp_lcm.c
       misc/mediatek/mach/mt6735/emx8816aa/lcm/mt65xx_lcm_list.c
HDMI：
	   drivers/misc/mediatek/ext_disp/mt6735/extd_hdmi_drv.c
DSI：
		drivers/misc/mediatek/dispsys/mt6735/ddp_dsi.c:2585:	lcm_drv->set_util_funcs(utils);
DPI：
		drivers/misc/mediatek/dispsys/mt6735/ddp_dpi.c:815:    lcm_drv->set_util_funcs(utils);
		
	DSI流程：
		
		misc/mediatek/dispsys/mt6735/ddp_info.c:216:    &ddp_driver_dsi0, //DISP_MODULE_DSI0
		misc/mediatek/dispsys/mt6735/ddp_manager.c:206:    if(module == DISP_MODULE_DSI0)
	   
================================================================================
cmdline：
	console=tty0 console=ttyMT0,921600n1 root=/dev/ram vmalloc=496M androidboot.hardware=mt6735 slub_max_order=0 slub_debug=O bootopt=64S3,32N2,64N2 lcm=0-cpt_clap070wp03xg_sn65dsi83_ti947 fps=6377 vram=19726336 androidboot.selinux=permissive printk.disable_uart=0 ddebug_query="file *mediatek* +p ; file *gpu* =_" bootprof.pl_t=5123 bootprof.lk_t=1492 boot_reason=0 androidboot.serialno=0123456789ABCDEF androidboot.bootreason=power_key androidboot.devicetype=common androidboot.devicetype=commoncommon gpt=1

	
bootargs参数传递过程：
	https://blog.csdn.net/eleven_xiy/article/details/72835181
	
	app/mt_boot/mt_boot.c:1183:void mt_boot_init(const struct app_descriptor *app)
	app/mt_boot/mt_boot.c:1304:.init = mt_boot_init,
	app/mt_boot/mt_boot.c:1246:	boot_linux_from_storage();
	app/mt_boot/sys_commands.c:34:extern int boot_linux_from_storage(void);
		strlen += sprintf(commanline, "%s %s", commanline, g_boot_hdr->cmdline);
		strlen += sprintf(commanline, "%s lcm=%1d-%s", commanline, DISP_IsLcmFound(), mt_disp_get_lcm_id());
		strlen += sprintf(commanline, "%s fps=%1d", commanline, mt_disp_get_lcd_time());
		strlen += sprintf(commanline, "%s vram=%1d", commanline, DISP_GetVRamSize());
		sprintf(commanline, "%s androidboot.selinux=permissive", commanline);
	app/mt_boot/mt_boot.c:743:    boot_linux_fdt((void *)kernel, (unsigned *)tags,
	//解析dtb，写入到DRAM指定区域；
		ret = fdt_setprop_string(fdt, offset, "bootargs", cmdline);
		//此时，LK将参数已bootargs的方式，传给Kernel，然后启动kernel。
	
================================================================================
Kernel启动流程：

	init/main.c:476:asmlinkage void __init start_kernel(void)  //Kernel的入口函数
		parse_early_param(); //解析uboot参数
		mm_init(); //内存初始化
		console_init(); //控制台初始化
		rest_init(); // 驱动相关启动
			kernel_thread(kernel_init, NULL, CLONE_FS | CLONE_SIGHAND);
				kernel_init_freeable();
					do_basic_setup();
						do_initcalls(); //加载各level的驱动程序
				run_init_process("/bin/init") //驱动程序加载完成后，调用init进程

	
	drivers/misc/mediatek/mach/mt6735/core.c:114:	.reserve	= mt_reserve,
	drivers/misc/mediatek/mach/mt6735/mt_devs.c:2903:void mt_reserve(void)
	drivers/misc/mediatek/mach/mt6735/mt_devs.c:2018:__init int mt_board_init(void)
	drivers/misc/mediatek/mach/mt6735/include/mach/devs.h:22:extern int mt_board_init(void);
	
================================================================================
Kernel build：
	arch/arm64/configs/emx8816aa_debug_defconfig
		CONFIG_MTK_PLATFORM="mt6735"
		CONFIG_ARCH_MTK_PROJECT="emx8816aa"
		CONFIG_CUSTOM_KERNEL_LCM="cpt_clap070wp03xg_sn65dsi83_ti947"
	
	MTK_PLATFORM=mt6735
	MTK_CUSTOM_PATH  := $(srctree)/drivers/misc/mediatek
	
	MTK_PLATFORM_PATH_ROOT := $(srctree)/drivers/misc/mediatek/mach/$(MTK_PLATFORM)
								drivers/misc/mediatek/mach/mt6735
	MTK_PROJECT_PATH_ROOT := $(srctree)/drivers/misc/mediatek/mach/$(MTK_PLATFORM)/$(ARCH_MTK_PROJECT)
								drivers/misc/mediatek/mach/mt6735/emx8816aa
	
================================================================================
printk：
	驱动：
		misc/mediatek/mtprof/mt_printk_ctrl.c
	设备节点：
		/proc/mtprintk

	printk：
		kernel/printk.c
	LK中设置参数：
		printk.disable_uart=0 ddebug_query="file *mediatek* +p 
		

================================================================================
LK：
	启动kernel
	bootable/bootloader/lk/app/mt_boot/mt_boot.c
================================================================================
MIPI相关资料：
	https://blog.csdn.net/kris_fei/article/details/77774995
	https://blog.csdn.net/changqing1990/article/details/78595565
	https://blog.csdn.net/changqing1990/article/details/81128552

================================================================================
BT565

================================================================================
LK：
	宏定义：
	target/emx8816aa/rules.mk
	
	配置文件：
		bootable/bootloader/project/emx8816aa.mk

	启动流程：
	kernel/main.c                      //LK入口函数：
	void kmain(void)
		kernel/thread.c:536:void thread_init_early(void)
		thread_init_early
		
		platform/mt6735/platform.c     //platform入口 
		platform_early_init
			    /* initialize the uart */
				uart_init_early();
				platform/mt6735/uart.c:349:void uart_init_early(void)
				
				mtk_wdt_init();
				
				//i2c init
				i2c_hw_init();
				platform/mt6735/mt_i2c.c:846:int i2c_hw_init(void)
		
				pmic_init();
		
		target/emx8816aa/init.c:47:void target_early_init(void)
		target_early_init

		
	UART：	
		platform/mt6735/uart.c:349:void uart_init_early(void)
	
	I2C：
		platform/mt6735/mt_i2c.c:846:int i2c_hw_init(void)
	
	启动模式（bootmode）：
		/* boot type definitions */
		typedef enum {
			NORMAL_BOOT = 0,
			META_BOOT = 1,
			RECOVERY_BOOT = 2,
			SW_REBOOT = 3,
			FACTORY_BOOT = 4,
			ADVMETA_BOOT = 5,
			ATE_FACTORY_BOOT = 6,
			ALARM_BOOT = 7,
		#if defined(CONFIG_MTK_KERNEL_POWER_OFF_CHARGING)
			KERNEL_POWER_OFF_CHARGING_BOOT = 8,
			LOW_POWER_OFF_CHARGING_BOOT = 9,
		#endif
			UNKNOWN_BOOT
		} BOOTMODE;
		
		流程：
			kernel/main.c:179:	platform_init();
			platform/mt6735/platform.c:735:    boot_mode_select();
			platform/mt6735/boot_mode.c:81:void boot_mode_select(void)
			
			platform/mt6735/mt_rtc.c:221:bool Check_RTC_Recovery_Mode(void)
			platform/mt6735/boot_mode.c:129:    if(Check_RTC_Recovery_Mode())   //判断是否进入Recovery模式
			platform/mt6735/boot_mode.c:104:    if(Check_RTC_PDN1_bit13())      //判断是否进入fastboot模式
	
	Fastboot：
		app/mt_boot/fastboot.c:405:int fastboot_init(void *base, unsigned size)
		app/mt_boot/mt_boot.c:1297:	fastboot_init(target_get_scratch_address(), sz);
		app/mt_boot/fastboot.c:468:    fastboot_register("oem reboot-recovery",cmd_oem_reboot2recovery, FALSE);
		
	Display：
		https://blog.csdn.net/u012852605/article/details/84978677
		
		arch/arm/crt0.S:187:	bl		kmain
		kernel/main.c:76:void kmain(void)
		kernel/main.c:128:	thread_resume(thread_create("bootstrap2", &bootstrap2, NULL, DEFAULT_PRIORITY, DEFAULT_STACK_SIZE));
		kernel/main.c:179:	platform_init();
		platform/mt6735/platform.c:684:    mt_disp_init((void *)g_fb_base);
		platform/mt6735/mt_disp_drv.c:235:        primary_display_init(NULL);
		platform/mt6735/primary_display.c:580:		pgc->plcm = disp_lcm_probe(NULL, LCM_INTERFACE_NOTDEFINED);
		platform/mt6735/disp_lcm.c:267:disp_lcm_handle* disp_lcm_probe(char* plcm_name, LCM_INTERFACE_ID lcm_id)
			platform/mt6735/disp_lcm.c:130:	dpmgr_set_lcm_utils(handle, plcm->drv);
			platform/mt6735/ddp_manager.c:781:            if((ddp_modules_driver[module_name]->set_lcm_utils!= 0)&&lcm_drv)
			platform/mt6735/ddp_dsi.c:2600:int ddp_dsi_set_lcm_utils(DISP_MODULE_ENUM module, LCM_DRIVER *lcm_drv)
			dev/lcm/cpt_clap070wp03xg_sn65dsi83_ti947/cpt_clap070wp03xg_sn65dsi83_ti947.c:766:	.set_util_funcs = lcm_set_util_funcs
		
			platform/mt6735/disp_lcm.c:314:					handle = _display_interface_path_init(plcm);
			platform/mt6735/disp_lcm.c:131:	dpmgr_path_init(handle, CMDQ_DISABLE);
			platform/mt6735/ddp_manager.c:428:                 ddp_modules_driver[module_name]->init(module_name, cmdqHandle);
			
			platform/mt6735/disp_lcm.c:141:	dpmgr_path_config(handle, &data_config, CMDQ_DISABLE);
			platform/mt6735/ddp_manager.c:581:                ddp_modules_driver[module_name]->config(module_name, config, cmdqHandle);
			platform/mt6735/ddp_dsi.c:2249:int ddp_dsi_config(DISP_MODULE_ENUM module, disp_ddp_path_config *config, void *cmdq_handle)
			platform/mt6735/ddp_dsi.c:2742:	.config		= ddp_dsi_config,
		
		到这里整个lk关于lcm驱动的加载过程就都介绍完了，做完上面介绍的流程之后，在跑完lk准备调到kernel之前，lk会通过fdt将加载到的lcm相关信息传给kernel，以便后续的操作
		app/mt_boot/mt_boot.c:1305:.init = mt_boot_init,
		app/mt_boot/mt_boot.c:1247:	boot_linux_from_storage();   // 此次，来判断启动是boot，还是recovery
		app/mt_boot/mt_boot.c:731:void boot_linux(void *kernel, unsigned *tags,
		app/mt_boot/mt_boot.c:230:int boot_linux_fdt(void *kernel, unsigned *tags,

		
		// LK传给kernel的显示参数：
		app/mt_boot/mt_boot.c:523:    ptr = (char *)target_atag_videolfb((unsigned *)buf);
		    
			ptr = (char *)target_atag_videolfb((unsigned *)buf);
			ret = fdt_setprop(fdt, offset, "atag,videolfb", buf, ptr - buf);
			
				[2760] videolfb - fb_base    = 0xbecf0000
				[2760] videolfb - islcmfound = 0
				[2880] videolfb - fps        = 6378
				[2880] videolfb - vram       = 19726336
				[2880] videolfb - lcmname    = cpt_clap070wp03xg_sn65dsi83_ti947
		
		DDP_MODULE_DRIVER ddp_driver_dsi0 = 
		{
			.module 		= DISP_MODULE_DSI0,
			.init			= ddp_dsi_init,
			.deinit		= ddp_dsi_deinit,
			.config		= ddp_dsi_config,
			.trigger		= ddp_dsi_trigger,
			.start		= ddp_dsi_start,
			.stop		= ddp_dsi_stop,
			.reset		= ddp_dsi_reset,
			.power_on	= ddp_dsi_power_on,
			.power_off	= ddp_dsi_power_off,
			.is_idle		= ddp_dsi_is_idle,
			.is_busy		= ddp_dsi_is_busy,
			.dump_info	= ddp_dsi_dump,
			.set_lcm_utils =  ddp_dsi_set_lcm_utils,
			.polling_irq	 = ddp_dsi_polling_irq
		};	

		LCM_DRIVER cpt_clap070wp03xg_sn65dsi83_ti947_lcm_drv = 
		{
			.name		    = "cpt_clap070wp03xg_sn65dsi83_ti947",
			.set_util_funcs = lcm_set_util_funcs,
			.get_params     = lcm_get_params,
			.init           = lcm_init,
			.suspend        = lcm_suspend,
			.resume         = lcm_resume,
			.compare_id    = lcm_compare_id,
		};
		
	Logo显示：
		kernel/main.c:179:	platform_init();
		platform/mt6735/platform.c:883:        mt_disp_show_boot_logo();
		platform/mt6735/mt_logo.c:136:void mt_disp_show_boot_logo(void)
		
		图片：
		dev/logo/ecarx1080p/ecarx1080p_uboot.bmp
		
	DSI：
		platform/mt6735/platform.c:684:    mt_disp_init((void *)g_fb_base);
		platform/mt6735/mt_disp_drv.c:235:        primary_display_init(NULL);
		platform/mt6735/primary_display.c:689:	ret = disp_lcm_init(pgc->plcm);
		platform/mt6735/disp_lcm.c:461:            ret = DSI_set_cmdq( _get_dst_module_by_lcm(plcm), NULL, data_array, 1, 1); // read maximum return size.
		platform/mt6735/ddp_dsi.c:2029:	DISPCHECK("DSI_set_cmdq, module=%s, cmdq=0x%08x\n", module_name, cmdq);
		
		
		
	暂定：
		drivers/misc/mediatek/cmdq/mt6735/cmdq_device.c:178:		cmdq_dev_alloc_disp_module_PA_by_name("mediatek,DISPSYS", (i-CMDQ_MODULE_INSTRUCTION_COUNT_DISP_OVL0),
		drivers/misc/mediatek/dispsys/mt6735/ddp_drv.c:768:	{ .compatible = "mediatek,DISPSYS", },
		arch/arm/boot/dts/mt6735.dtsi:1154:			compatible = "mediatek,DISPSYS";
		
		drivers/misc/mediatek/dispsys/mt6735/ddp_drv.c:677:	dsi_reg_va = dispsys_reg[DISP_REG_DSI0];
		drivers/misc/mediatek/dispsys/mt6735/mt6735m/ddp_reg.h:1172:extern unsigned long dsi_reg_va;
		drivers/misc/mediatek/dispsys/mt6735/ddp_irq.c:299:                DISP_CPU_REG_SET(dsi_reg_va + 0xC, ~reg_temp_val);

================================================================================
Kernel：
	WATCHDOG：
	drivers/misc/mediatek/wdt/mt6735/mtk_wdt.c
	
	Camera流程：
		https://www.cnblogs.com/reality-soul/p/4668532.html
		
		
	PWM：
		drivers/misc/mediatek/dispsys/mt6735/ddp_pwm.c:333:DDP_MODULE_DRIVER ddp_driver_pwm =
		drivers/misc/mediatek/dispsys/mt6735/ddp_info.c:199:extern DDP_MODULE_DRIVER ddp_driver_pwm;
		drivers/misc/mediatek/dispsys/mt6735/ddp_info.c:214:    &ddp_driver_pwm, //DISP_MODULE_PWM0 
		
		
		
	PWM：
		mediatek/videox/mt6735/primary_display.c:5135:int primary_display_init(char *lcm_name, unsigned int lcm_fps)
		mediatek/videox/mt6735/primary_display.c:5150:	dpmgr_init();
		mediatek/dispsys/mt6735/ddp_debug.c:957:void ddp_debug_init(void)
		mediatek/dispsys/mt6735/ddp_manager.c:2037:    ddp_debug_init();
		drivers/misc/mediatek/leds/leds_drv.c:497:		INIT_WORK(&g_leds_data[i]->work, mt_mt65xx_led_work);
		drivers/misc/mediatek/leds/mt6735/leds_hal.h:29:extern void mt_mt65xx_led_work(struct work_struct *work);
		drivers/misc/mediatek/leds/mt6735/leds.c:712:void mt_mt65xx_led_work(struct work_struct *work)
		
		
		drivers/misc/mediatek/leds/leds_drv.c:170:	mt_led_set_pwm(pwm_num, led);
		drivers/misc/mediatek/leds/mt6735/leds_hal.h:24:extern int mt_led_set_pwm(int pwm_num, struct nled_setting* led);
		drivers/misc/mediatek/leds/mt6735/leds.c:177:int mt_led_set_pwm(int pwm_num, struct nled_setting* led)
		
	显示debug：
		echo dbg_log:1 > /d/dispsys
		/sys/kernel/debug/dispsys
			root@emx8816aa:/sys/kernel/debug # cat dispsys
			USAGE:
				   echo [ACTION]>/d/dispsys
			ACTION:
				   regr:addr
						  :regr:0xf400c000
				   regw:addr,value          :regw:0xf400c000,0x1
				   dbg_log:0|1|2            :0 off, 1 dbg, 2 all
				   irq_log:0|1              :0 off, !0 on
				   met_on:[0|1],[0|1],[0|1] :fist[0|1]on|off,other [0|1]direct|decouple
				   backlight:level
				   dump_aal:arg
				   mmp
				   dump_reg:moduleID
				   dump_path:mutexID
				   dpfd_ut1:channel
		
		/sys/kernel/debug/disp/dump
================================================================================
HDMI：DPI接口
	DTS：
		arch/arm64/boot/dts/mt6735.dtsi:1263:			compatible = "mediatek,HDMI";
	
	驱动：
		drivers/misc/mediatek/ext_disp/mt6735/mtk_ext_disp_mgr.c:349:	{.compatible = "mediatek,HDMI", },
	
	详解：
		创建class及device
		hdmitx/hdmitx
		
		作用：
			1.	控制打开/关闭HDMI功能
			2.	设置分辨率
		
	Kernel配置：
		arch/arm64/configs/emx8816aa_debug_defconfig:1358:# CONFIG_MTK_HDMI_SUPPORT is not set
		arch/arm64/configs/emx8816aa_debug_defconfig:1360:CONFIG_CUSTOM_KERNEL_HDMI=""
		arch/arm64/configs/emx8816aa_defconfig:1355:# CONFIG_MTK_HDMI_SUPPORT is not set
		arch/arm64/configs/emx8816aa_defconfig:1357:CONFIG_CUSTOM_KERNEL_HDMI=""

		Sii8338、Sii8348、MT8193
		根据硬件设计，修改IIC的channel，IIC的地址，配置GPIO，配置DPI，配置IIS
	
	Framework配置HDMI：
		device/pvetec/emx8816aa/ProjectConfig.mk +386
			emx8816aa/ProjectConfig.mk:386:MTK_HDMI_SUPPORT = no
				385:MTK_HDMI_HDCP_SUPPORT = no
				386:MTK_HDMI_SUPPORT = no
				425:MTK_INTERNAL_HDMI_SUPPORT = no
				496:MTK_MT8193_HDMI_SUPPORT = no

	FB类型：
		MTKFB_DISPIF_PRIMARY_LCD = 0,
		MTKFB_DISPIF_HDMI = 1,
	
	显示类型：
		typedef enum {
			DISPIF_MODE_VIDEO = 0,
			DISPIF_MODE_COMMAND
		} MTKFB_DISPIF_MODE;
	
	显示格式：
		DISPIF_FORMAT_RGB888
	
	流程：
		drivers/misc/mediatek/ext_disp/mt6735/mtk_ext_disp_mgr.c:459:    hdmi_init();
		drivers/misc/mediatek/ext_disp/mt6735/extd_hdmi_drv.c:1433:void hdmi_init()
			hdmi_drv = (HDMI_DRIVER *)HDMI_GetDriver(); //获取HDMI芯片驱动，比如：Sii8338、Sii8348、MT8193
			
	现有代码的疑问：
		1.	E01设备上使用的HDMI编解器芯片的型号？Sii8338、Sii8348、MT8193
		2.	E01 HDMI使用的DPI接口，分辨率及帧率是多少？1920*720*60?
		
	DPI0：
		mt6735.dtsi:1266:		DPI@0x14012000 {
		mt6735.dtsi:1267:			compatible = "mediatek,DPI0";
		
		misc/mediatek/dispsys/mt6735/ddp_dpi.c:1054:        node = of_find_compatible_node(NULL, NULL, "mediatek,DPI0");

		
================================================================================
MTK Android Driver知识大全
	https://www.cnblogs.com/biglucky/p/4413797.html
================================================================================
系统启动时间统计：
	/proc/bootprof
	130|root@emx8816aa:/proc # cat bootprof
----------------------------------------
0           BOOT PROF (unit:msec)
----------------------------------------
      3113        : preloader
      1341        : lk
       196        : lk->Kernel
----------------------------------------
      4472.046384 : Kernel_init_done
      4909.249845 : INIT: on init start
      4925.795153 : INIT:Mount_START
      5561.890076 : INIT:Mount_END
      5660.336615 : post-fs-data: on modem start
      7410.465999 : BOOT_Animation:START
      8094.765153 : Zygote:Preload Start
      8128.838922 : Zygote:Preload Start
      9180.035230 : Zygote:Preload 343 obtain resources in 544ms
      9191.100307 : Zygote:Preload 41 resources in 10ms
      9205.593538 : Zygote:Preload 343 obtain resources in 558ms
      9216.360769 : Zygote:Preload 41 resources in 9ms
      9684.811230 : Zygote:Preload 3005 classes in 1586ms
      9724.175846 : Zygote:Preload 3005 classes in 1519ms
      9765.749538 : Zygote:Preload End
      9776.111999 : Zygote:Preload End
     10265.456384 : Android:PackageManagerService_Start
     10354.801999 : Android:PMS_scan_START
     10539.530538 : Android:PMS_scan_data_done:/system/framework
     11133.292769 : Android:PMS_scan_data_done:/system/priv-app
     12099.090384 : Android:PMS_scan_data_done:/system/app
     12131.278461 : Android:PMS_scan_data_done:/system/plugin
     12135.267307 : Android:PMS_scan_data_done:/data/app
     12141.271307 : Android:PMS_scan_END
     12202.939846 : Android:PMS_READY
     16749.123154 : BOOT_Animation:END
----------------------------------------


bootprof的使用方法：
应用程序的调用：
static void add_boot_event(char *bootevent) {
    int fd = open("/proc/bootprof", O_RDWR);
    if(fd < 0) {
        ALOGE("fail to open bootprof: %s", strerror(errno));
        return;
    }
    write(fd, bootevent, strlen(bootevent));
    close(fd);
}


add_boot_event("fastlogo display");


驱动支持：
drivers/misc/mediatek/mtprof/bootprof.c

================================================================================
MTK Camera:
	MTK Camera 从底层到应用层一网打尽
	https://www.jianshu.com/p/5f538820e370?from=timeline&isappinstalled=0


================================================================================
升级：
	1.升级程序将升级包数据copy到cache分区后，使用set_bootloader_message(&boot)函数，将bootmode数据存储在misc（para）分区，设置启动模式。
	2.该bootmode数据存储在misc（para）分区
	3.LK里调用recovery_check_command_trigger函数，确认是否进入recovery模式
	4.lk将启动recovery分区的boot镜像，进入升级模式
	
	注：
	uboot中会先后检查三种方式进入recovery是否成立：
	第一种是kernel直接写一个寄存器来标记下次启动将进入recovery模式；
	第二种是快捷键：powerkey+downVOL；
	第三中就是上层应用发送下来的回复出厂设置的命令，这个命令在restart之前kernel会往MISC分区中写command(boot-recovery)。
	
	代码流程：
	bootable/recovery
		bootloader.cpp:77:int set_bootloader_message(const struct bootloader_message *in) {
	
	bootable/bootable/lk
		platform/mt6735/recovery.c:93:BOOL recovery_check_command_trigger(void)
	
================================================================================
那鹏服务器：
10.1.49.237
app/app
~/xiaokang/project/vendor/nxp/linux-4.14.78-imx8qxp


================================================================================
Framebuffer:
	/sys/kernel/debug/fbconfig
================================================================================
@各组TL

BX11项目PP交样的日程，展开给大家，请大家组内展开。

1.工程建立，完毕。路径如下：
分支名称：e01_trunk
SVN路径：http://10.1.55.2/svn/Geely_KC-2/SoftwareLibrary/06.Project/02.V850/Branches/E01/E01_Branch_20190111_RH850 
2.编码，集成—————4/15前
3.联合调试
4.软件初版集成————4/25
5.内部测试and问题整改
6.PP装车版本集成——————4/29
7.PP版本发布—————————5/2

以上



================================================================================
展频时钟：
E01在使用8844的时候，SOC的展频功能可以打开；
但不使用8844的时候，soc直连947的时候，需要将soc的展频关掉；

可能原因是：
947使用外部时钟，但soc的展频时钟不符合947的输入需求；
而8844是异步时钟，可以接受外部的展频时钟，将其转化为正常时钟；

================================================================================
typedef enum {
        DUAL_CAMERA_NONE_SENSOR = 0,
        DUAL_CAMERA_MAIN_SENSOR = 1,
        DUAL_CAMERA_SUB_SENSOR = 2,
        DUAL_CAMERA_MAIN_2_SENSOR = 4,
        /* for backward compatible */
        DUAL_CAMERA_MAIN_SECOND_SENSOR = 4,
        /* DUAL_CAMERA_SUB_2_SENSOR   = 16, */
        DUAL_CAMERA_SENSOR_MAX
} CAMERA_DUAL_CAMERA_SENSOR_ENUM;

================================================================================
倒车：
	drivers/misc/mediatek/imgsensor/src/mt6735/kd_sensorlist.c:1714:    g_pSensorFunc->SensorGetInfo(pScenarioId, pInfo, pConfig);
		CAMERA_HW_Ioctl
	drivers/misc/mediatek/imgsensor/src/mt6735/ti940_mipi_yuv/ti940mipi_yuv_Sensor.c:2650:SENSOR_FUNCTION_STRUCT	SensorFuncTI940=

================================================================================

1.	kd_sensorlist里为什么注册两个字符设备驱动kd_camera_hw 和 kd_camera_hw_bus2？作用是？是针对于两个摄像头驱动吗？
	同时，注册了两个i2c设备，是针对于两个I2C芯片吗？
	这两个I2C设备在不同的I2C总线上。

2.	kd_sensorlist.h中kdSensorList驱动数组为什么没有定义TI940_MIPI_YUV宏，这样的话，940的SensorFuncTI940定义的函数均不能调用。
3.	#define TI940_SENSOR_ID 0x58 ：sensorid根据什么来定义呢？

================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
================================================================================
LCD：
	alps/bootable/bootloader/lk/dev/lcm/cpt_clap070wp03xg_sn65dsi83_ti947/cpt_clap070wp03xg_sn65dsi83_ti947.c
	alps/bootable/bootloader/lk/dev/lcm/cpt_clap070wp03xg_sn65dsi83_ti947/sn65dsi83_i2c.c
LOGO:
	alps/bootable/bootloader/lk/dev/logo/ecarx1080p
	
BACKLIGHT:
	alps/kernel-3.10/drivers/misc/mediatek/leds/leds_drv.c
	alps/kernel-3.10/drivers/misc/mediatek/leds/mt6735/leds.c
	alps/kernel-3.10/drivers/misc/mediatek/leds/drivers/leds/led-class.c
	alps/kernel-3.10/drivers/misc/mediatek/mach/mt6735/carstd/leds/mt65xx/cust_leds.c

KeyPad:
	alps/kernel-3.10/drivers/input/misc/ecp_keypad.c
	
TP:	
	alps/kernel-3.10/drivers/input/touchscreen/mediatek/TP_ti947_BIRD_C/tp_ti947_driver.c
	
TI947/DSI84:
	alps/kernel-3.10/drivers/misc/mediatek/lcm/cpt_clap070wp03xg_sn65dsi83_ti947/cpt_clap070wp03xg_sn65dsi83_ti947.c	
	alps/kernel-3.10/drivers/misc/mediatek/lcm/cpt_clap070wp03xg_sn65dsi83_ti947/sn65dsi83_i2c.c
	alps/kernel-3.10/drivers/misc/mediatek/lcm/cpt_clap070wp03xg_sn65dsi83_ti947/ti947_i2c.c
	alps/kernel-3.10/drivers/misc/mediatek/lcm/cpt_clap070wp03xg_sn65dsi83_ti947/ti948_i2c.c
	
BMI120:
	alps/kernel-3.10/drivers/misc/mediatek/accelerometer/bmi160_acc/bmi160_acc.c
	alps/kernel-3.10/drivers/misc/mediatek/gyroscope/bmi160_gyro/bmi160_gyro.c

TEF6686: kernel-3.10/drivers/misc/mediatek/fm_tef668x 

AK7738:  
	kernel-3.10/sound/soc/mediatek/mt_soc_audio_v3/ ak7738.c
	kernel-3.10/sound/soc/mediatek/mt_soc_audio_v3/ak7738ctl.h
	kernel-3.10/sound/soc/mediatek/mt_soc_audio_v3/ ak7738_dsp_code.h
	kernel-3.10/sound/soc/mediatek/mt_soc_audio_v3/ ak7738.h

XF6001: 
	kernel-3.10/drivers/xf6001sye/  xf6001sye.c
	kernel-3.10/drivers/xf6001sye/  xf6001sye.h

================================================================================
倒车代码：
vendor/pvetec/libs/emx8816aa/instantcam

Hal代码：
vendor/mediatek/proprietary/platform/mt6735/hardware/mtkcam/D1/hal/sensor

================================================================================

常用的GPIO：
	输出GPIO：
		standbyen：
			pin165 gpio21
		bl_en:
			pin33 gpio146
		
		947PDB:
			pin178 gpio43
			
		947 touch gpio:
			pin150 gpio11
		
		
	显示：
		背光	：GPIO146
		947PDB	：GPIO43
		DSI EN	：GPIO126
		TP INT	：GPIO11
		DSI INT	: GPIO125
		
================================================================================

E01 东软I2C配置：
I2C总线配置：
	I2C0：
	I2C1：
		UB947：0x0C
		Touch：0x1A
		948	:  0x2C
		
		DSI84：0x2D
		9277: 0xC4
		 
	I2C2：
		TW9992: 0x45
		 UB962: 0x30
	
	I2C3：
		775D: 0x38(8bit) 0x1C(7bit)
		  VR: 0x47
		  
================================================================================
查看进入倒车的GPIO：
cat /sys/devices/virtual/misc/mtgpio/pin  | grep "^ 10"

================================================================================
		  
重新复位9992：
		  
echo -wdout 42 0 > /sys/devices/virtual/misc/mtgpio/pin
sleep 1
echo -wdout 42 1 > /sys/devices/virtual/misc/mtgpio/pin

i2cset -y -f 0x02 0x45 0x02  0x40
i2cset -y -f 0x02 0x45 0x02  0x40
i2cset -y -f 0x02 0x45 0x04  0x00
i2cset -y -f 0x02 0x45 0x04  0x00
i2cset -y -f 0x02 0x45 0x05  0x09
i2cset -y -f 0x02 0x45 0x05  0x09
i2cset -y -f 0x02 0x45 0x06  0x00
i2cset -y -f 0x02 0x45 0x06  0x00
i2cset -y -f 0x02 0x45 0x07  0x02
i2cset -y -f 0x02 0x45 0x07  0x02
i2cset -y -f 0x02 0x45 0x08  0x12
i2cset -y -f 0x02 0x45 0x08  0x12
i2cset -y -f 0x02 0x45 0x09  0xf0
i2cset -y -f 0x02 0x45 0x09  0xf0
i2cset -y -f 0x02 0x45 0x0a  0x09
i2cset -y -f 0x02 0x45 0x0a  0x09
i2cset -y -f 0x02 0x45 0x0b  0xd1
i2cset -y -f 0x02 0x45 0x0b  0xd1
i2cset -y -f 0x02 0x45 0x0c  0xcc
i2cset -y -f 0x02 0x45 0x0c  0xcc
i2cset -y -f 0x02 0x45 0x0d  0x00
i2cset -y -f 0x02 0x45 0x0d  0x00
i2cset -y -f 0x02 0x45 0x10  0x00
i2cset -y -f 0x02 0x45 0x10  0x00
i2cset -y -f 0x02 0x45 0x11  0x64
i2cset -y -f 0x02 0x45 0x11  0x64
i2cset -y -f 0x02 0x45 0x12  0x11
i2cset -y -f 0x02 0x45 0x12  0x11
i2cset -y -f 0x02 0x45 0x13  0x80
i2cset -y -f 0x02 0x45 0x13  0x80
i2cset -y -f 0x02 0x45 0x14  0x80
i2cset -y -f 0x02 0x45 0x14  0x80
i2cset -y -f 0x02 0x45 0x15  0x00
i2cset -y -f 0x02 0x45 0x15  0x00
i2cset -y -f 0x02 0x45 0x17  0x80
i2cset -y -f 0x02 0x45 0x17  0x80
i2cset -y -f 0x02 0x45 0x18  0x44
i2cset -y -f 0x02 0x45 0x18  0x44
i2cset -y -f 0x02 0x45 0x19  0x06
i2cset -y -f 0x02 0x45 0x19  0x06
i2cset -y -f 0x02 0x45 0x1a  0x00
i2cset -y -f 0x02 0x45 0x1a  0x00
i2cset -y -f 0x02 0x45 0x1c  0x0f
i2cset -y -f 0x02 0x45 0x1c  0x0f
i2cset -y -f 0x02 0x45 0x1d  0x7f
i2cset -y -f 0x02 0x45 0x1d  0x7f
i2cset -y -f 0x02 0x45 0x1f  0x00
i2cset -y -f 0x02 0x45 0x1f  0x00
i2cset -y -f 0x02 0x45 0x20  0x50
i2cset -y -f 0x02 0x45 0x20  0x50
i2cset -y -f 0x02 0x45 0x21  0x22
i2cset -y -f 0x02 0x45 0x21  0x22
i2cset -y -f 0x02 0x45 0x22  0xf0
i2cset -y -f 0x02 0x45 0x22  0xf0
i2cset -y -f 0x02 0x45 0x23  0xd8
i2cset -y -f 0x02 0x45 0x23  0xd8
i2cset -y -f 0x02 0x45 0x24  0xbc
i2cset -y -f 0x02 0x45 0x24  0xbc
i2cset -y -f 0x02 0x45 0x25  0xb8
i2cset -y -f 0x02 0x45 0x25  0xb8
i2cset -y -f 0x02 0x45 0x26  0x44
i2cset -y -f 0x02 0x45 0x26  0x44
i2cset -y -f 0x02 0x45 0x27  0x38
i2cset -y -f 0x02 0x45 0x27  0x38
i2cset -y -f 0x02 0x45 0x28  0x00
i2cset -y -f 0x02 0x45 0x28  0x00
i2cset -y -f 0x02 0x45 0x29  0x00
i2cset -y -f 0x02 0x45 0x29  0x00
i2cset -y -f 0x02 0x45 0x2a  0x78
i2cset -y -f 0x02 0x45 0x2a  0x78
i2cset -y -f 0x02 0x45 0x2b  0x44
i2cset -y -f 0x02 0x45 0x2b  0x44
i2cset -y -f 0x02 0x45 0x2c  0x30
i2cset -y -f 0x02 0x45 0x2c  0x30
i2cset -y -f 0x02 0x45 0x2d  0x14
i2cset -y -f 0x02 0x45 0x2d  0x14
i2cset -y -f 0x02 0x45 0x2e  0xa5
i2cset -y -f 0x02 0x45 0x2e  0xa5
i2cset -y -f 0x02 0x45 0x2f  0xe6
i2cset -y -f 0x02 0x45 0x2f  0xe6
i2cset -y -f 0x02 0x45 0x33  0x05
i2cset -y -f 0x02 0x45 0x33  0x05
i2cset -y -f 0x02 0x45 0x34  0x1a
i2cset -y -f 0x02 0x45 0x34  0x1a
i2cset -y -f 0x02 0x45 0x35  0x00
i2cset -y -f 0x02 0x45 0x35  0x00
i2cset -y -f 0x02 0x45 0x36  0x5a
i2cset -y -f 0x02 0x45 0x36  0x5a
i2cset -y -f 0x02 0x45 0x37  0x18
i2cset -y -f 0x02 0x45 0x37  0x18
i2cset -y -f 0x02 0x45 0x38  0xdd
i2cset -y -f 0x02 0x45 0x38  0xdd
i2cset -y -f 0x02 0x45 0x39  0x00
i2cset -y -f 0x02 0x45 0x39  0x00
i2cset -y -f 0x02 0x45 0x3a  0x30
i2cset -y -f 0x02 0x45 0x3a  0x30
i2cset -y -f 0x02 0x45 0x3b  0x00
i2cset -y -f 0x02 0x45 0x3b  0x00
i2cset -y -f 0x02 0x45 0x3c  0x00
i2cset -y -f 0x02 0x45 0x3c  0x00
i2cset -y -f 0x02 0x45 0x3d  0x00
i2cset -y -f 0x02 0x45 0x3d  0x00
i2cset -y -f 0x02 0x45 0x3f  0x1a
i2cset -y -f 0x02 0x45 0x3f  0x1a
i2cset -y -f 0x02 0x45 0x40  0x80
i2cset -y -f 0x02 0x45 0x40  0x80
i2cset -y -f 0x02 0x45 0x41  0x00
i2cset -y -f 0x02 0x45 0x41  0x00
i2cset -y -f 0x02 0x45 0x42  0x00
i2cset -y -f 0x02 0x45 0x42  0x00
i2cset -y -f 0x02 0x45 0x48  0x02
i2cset -y -f 0x02 0x45 0x48  0x02
i2cset -y -f 0x02 0x45 0x49  0x00
i2cset -y -f 0x02 0x45 0x49  0x00
i2cset -y -f 0x02 0x45 0x4a  0x81
i2cset -y -f 0x02 0x45 0x4a  0x81
i2cset -y -f 0x02 0x45 0x4b  0x0a
i2cset -y -f 0x02 0x45 0x4b  0x0a
i2cset -y -f 0x02 0x45 0x4c  0x00
i2cset -y -f 0x02 0x45 0x4c  0x00
i2cset -y -f 0x02 0x45 0x4d  0x01
i2cset -y -f 0x02 0x45 0x4d  0x01
i2cset -y -f 0x02 0x45 0x4e  0x01
i2cset -y -f 0x02 0x45 0x4e  0x01
i2cset -y -f 0x02 0x45 0x50  0x00
i2cset -y -f 0x02 0x45 0x50  0x00
i2cset -y -f 0x02 0x45 0x51  0x00
i2cset -y -f 0x02 0x45 0x51  0x00
i2cset -y -f 0x02 0x45 0x52  0x00
i2cset -y -f 0x02 0x45 0x52  0x00
i2cset -y -f 0x02 0x45 0x56  0x00
i2cset -y -f 0x02 0x45 0x56  0x00
i2cset -y -f 0x02 0x45 0x57  0x00
i2cset -y -f 0x02 0x45 0x57  0x00
i2cset -y -f 0x02 0x45 0x58  0x00
i2cset -y -f 0x02 0x45 0x58  0x00
i2cset -y -f 0x02 0x45 0x60  0x00
i2cset -y -f 0x02 0x45 0x60  0x00
i2cset -y -f 0x02 0x45 0x61  0x00
i2cset -y -f 0x02 0x45 0x61  0x00
i2cset -y -f 0x02 0x45 0x62  0x00
i2cset -y -f 0x02 0x45 0x62  0x00
i2cset -y -f 0x02 0x45 0x70  0x01
i2cset -y -f 0x02 0x45 0x70  0x01
i2cset -y -f 0x02 0x45 0x71  0x85
i2cset -y -f 0x02 0x45 0x71  0x85
i2cset -y -f 0x02 0x45 0x72  0xa0
i2cset -y -f 0x02 0x45 0x72  0xa0
i2cset -y -f 0x02 0x45 0x73  0x00
i2cset -y -f 0x02 0x45 0x73  0x00
i2cset -y -f 0x02 0x45 0x74  0xf0
i2cset -y -f 0x02 0x45 0x74  0xf0
i2cset -y -f 0x02 0x45 0x75  0x00
i2cset -y -f 0x02 0x45 0x75  0x00
i2cset -y -f 0x02 0x45 0x76  0x17
i2cset -y -f 0x02 0x45 0x76  0x17
i2cset -y -f 0x02 0x45 0x77  0x05
i2cset -y -f 0x02 0x45 0x77  0x05
i2cset -y -f 0x02 0x45 0x78  0x88
i2cset -y -f 0x02 0x45 0x78  0x88
i2cset -y -f 0x02 0x45 0x79  0x06
i2cset -y -f 0x02 0x45 0x79  0x06
i2cset -y -f 0x02 0x45 0x7a  0x28
i2cset -y -f 0x02 0x45 0x7a  0x28
i2cset -y -f 0x02 0x45 0x7b  0x46
i2cset -y -f 0x02 0x45 0x7b  0x46
i2cset -y -f 0x02 0x45 0x7c  0xb3
i2cset -y -f 0x02 0x45 0x7c  0xb3
i2cset -y -f 0x02 0x45 0x7d  0x06
i2cset -y -f 0x02 0x45 0x7d  0x06
i2cset -y -f 0x02 0x45 0x7e  0x13
i2cset -y -f 0x02 0x45 0x7e  0x13
i2cset -y -f 0x02 0x45 0x7f  0x10
i2cset -y -f 0x02 0x45 0x7f  0x10
i2cset -y -f 0x02 0x45 0x80  0x05
i2cset -y -f 0x02 0x45 0x80  0x05
i2cset -y -f 0x02 0x45 0x81  0xa0
i2cset -y -f 0x02 0x45 0x81  0xa0
i2cset -y -f 0x02 0x45 0x82  0x13
i2cset -y -f 0x02 0x45 0x82  0x13
i2cset -y -f 0x02 0x45 0x83  0x11
i2cset -y -f 0x02 0x45 0x83  0x11
i2cset -y -f 0x02 0x45 0x84  0x02
i2cset -y -f 0x02 0x45 0x84  0x02
i2cset -y -f 0x02 0x45 0x85  0x0e
i2cset -y -f 0x02 0x45 0x85  0x0e
i2cset -y -f 0x02 0x45 0x86  0x08
i2cset -y -f 0x02 0x45 0x86  0x08
i2cset -y -f 0x02 0x45 0x87  0x37
i2cset -y -f 0x02 0x45 0x87  0x37
i2cset -y -f 0x02 0x45 0x88  0x00
i2cset -y -f 0x02 0x45 0x88  0x00
i2cset -y -f 0x02 0x45 0x89  0x00
i2cset -y -f 0x02 0x45 0x89  0x00
i2cset -y -f 0x02 0x45 0x8a  0x02
i2cset -y -f 0x02 0x45 0x8a  0x02
i2cset -y -f 0x02 0x45 0x8b  0x33
i2cset -y -f 0x02 0x45 0x8b  0x33
i2cset -y -f 0x02 0x45 0x8c  0x22
i2cset -y -f 0x02 0x45 0x8c  0x22
i2cset -y -f 0x02 0x45 0x8d  0x03
i2cset -y -f 0x02 0x45 0x8d  0x03
i2cset -y -f 0x02 0x45 0x8e  0x22
i2cset -y -f 0x02 0x45 0x8e  0x22
i2cset -y -f 0x02 0x45 0x8f  0x01
i2cset -y -f 0x02 0x45 0x8f  0x01
i2cset -y -f 0x02 0x45 0x90  0x00
i2cset -y -f 0x02 0x45 0x90  0x00
i2cset -y -f 0x02 0x45 0x91  0x0c
i2cset -y -f 0x02 0x45 0x91  0x0c
i2cset -y -f 0x02 0x45 0x92  0x00
i2cset -y -f 0x02 0x45 0x92  0x00
i2cset -y -f 0x02 0x45 0x93  0x0e
i2cset -y -f 0x02 0x45 0x93  0x0e
i2cset -y -f 0x02 0x45 0x94  0x07
i2cset -y -f 0x02 0x45 0x94  0x07
i2cset -y -f 0x02 0x45 0x95  0xff
i2cset -y -f 0x02 0x45 0x95  0xff
i2cset -y -f 0x02 0x45 0x96  0x1a
i2cset -y -f 0x02 0x45 0x96  0x1a
i2cset -y -f 0x02 0x45 0x9b  0x02
i2cset -y -f 0x02 0x45 0x9b  0x02
i2cset -y -f 0x02 0x45 0xa0  0x00
i2cset -y -f 0x02 0x45 0xa0  0x00
i2cset -y -f 0x02 0x45 0xa1  0x00
i2cset -y -f 0x02 0x45 0xa1  0x00
i2cset -y -f 0x02 0x45 0xa2  0x30
i2cset -y -f 0x02 0x45 0xa2  0x30
i2cset -y -f 0x02 0x45 0xa3  0xc0
i2cset -y -f 0x02 0x45 0xa3  0xc0
i2cset -y -f 0x02 0x45 0xa4  0x00
i2cset -y -f 0x02 0x45 0xa4  0x00
i2cset -y -f 0x02 0x45 0xc0  0x06
i2cset -y -f 0x02 0x45 0xc0  0x06
i2cset -y -f 0x02 0x45 0xc1  0x20
i2cset -y -f 0x02 0x45 0xc1  0x20
i2cset -y -f 0x02 0x45 0xc2  0x30
i2cset -y -f 0x02 0x45 0xc2  0x30
i2cset -y -f 0x02 0x45 0xc3  0x00
i2cset -y -f 0x02 0x45 0xc3  0x00
i2cset -y -f 0x02 0x45 0xc8  0x58
i2cset -y -f 0x02 0x45 0xc8  0x58
i2cset -y -f 0x02 0x45 0xca  0x1e
i2cset -y -f 0x02 0x45 0xca  0x1e
i2cset -y -f 0x02 0x45 0xcb  0x1a
i2cset -y -f 0x02 0x45 0xcb  0x1a
i2cset -y -f 0x02 0x45 0xd1  0x0e
i2cset -y -f 0x02 0x45 0xd1  0x0e
i2cset -y -f 0x02 0x45 0xd2  0x0c
i2cset -y -f 0x02 0x45 0xd2  0x0c
i2cset -y -f 0x02 0x45 0xcf  0x0e
i2cset -y -f 0x02 0x45 0xcf  0x0e
i2cset -y -f 0x02 0x45 0xd3  0x0a
i2cset -y -f 0x02 0x45 0xd3  0x0a
i2cset -y -f 0x02 0x45 0xd4  0x0e
i2cset -y -f 0x02 0x45 0xd4  0x0e
i2cset -y -f 0x02 0x45 0xd0  0x0e
i2cset -y -f 0x02 0x45 0xd0  0x0e
i2cset -y -f 0x02 0x45 0x07  0x02
i2cset -y -f 0x02 0x45 0x07  0x02
i2cset -y -f 0x02 0x45 0x08  0x15
i2cset -y -f 0x02 0x45 0x08  0x15
i2cset -y -f 0x02 0x45 0x09  0xf0
i2cset -y -f 0x02 0x45 0x09  0xf0
i2cset -y -f 0x02 0x45 0x0a  0x12
i2cset -y -f 0x02 0x45 0x0a  0x12
i2cset -y -f 0x02 0x45 0x0b  0xd0
i2cset -y -f 0x02 0x45 0x0b  0xd0



================================================================================
DSI84：
正常情况：
	0xE5:0x01  00000001

异常情况：
	0xE5:0x79  01111001

错误原因：
	6：When the DSI channel A packet processor detects a data stream CRC error, this bit is set;
	5：When the DSI channel A packet processor detects an uncorrectable ECC error, this bit is set; this bit is cleared by writing a ‘1’ value.
	4：When the DSI channel A packet processor detects a correctable ECC error, this bit is set; this bit is cleared by writing a ‘1’ value.
	3：When the DSI channel A packet processor detects a low level protocol error, this bit is set; this bit is cleared by writing a ‘1’ value.
	
948：
正常情况：
	0x02:0x80
	0x1C:0x33
	0x23:0x34
	0x26:0x83
	0x27:0x84
	0x27:0x01
	
异常情况：
	0x02:0x00
	0x1C:0x23
	0x23:0x20
	0x26:0x16
	0x27:0x16
	0x27:0x11
	
================================================================================

1.	用i2cdetect检测有几组i2c总线在系统上，输入：i2cdetect -l
	root@fe5b_qj_1wk:/ # i2cdetect -l
	i2c-0   i2c             mt-i2c                                  I2C adapter
	i2c-1   i2c             mt-i2c                                  I2C adapter
	i2c-2   i2c             mt-i2c                                  I2C adapter
	i2c-3   i2c             mt-i2c                                  I2C adapter

2.	用i2cdetect检测挂载在i2c总线上器件，输入：i2cdetect -r -y 1
3.	用i2cdump查看器件所有寄存器的值，输入：i2cdump -f -y 1 0x20
4.	用i2cset和i2cget使用方法：
	i2cset -f -y 1 0x20 0x77 0x3f （设置i2c-1上0x20器件的0x77寄存器值为0x3f）
	i2cget -f -y 1 0x20 0x77     （读取i2c-1上0x20器件的0x77寄存器值）
	
	
================================================================================	
	
I2C-Tools (4.0)
	The I2C tools that used to be part of the lm-sensors package have been split to a separate package. The rationale for that move is that not all hardware monitoring chips are I2C devices, and not all I2C devices are hardware monitoring chips, so having everything in a single package was confusing and impractical.
	The i2c-tools package contains a heterogeneous set of I2C tools for Linux: a bus probing tool, a chip dumper, register-level SMBus access helpers, EEPROM decoding scripts, EEPROM programming tools, and a python module for SMBus access. All versions of Linux are supported, as long as I2C support is included in the kernel.

下载地址
	https://i2c.wiki.kernel.org/index.php/I2C_Tools 或者
	git clone git://git.kernel.org/pub/scm/utils/i2c-tools/i2c-tools.git

执行文件
	i2c-tools -4.0包含五个执行文件
	i2cdetect – 显示所有的i2c适配器(控制器)及其使用的外设
	i2cdump –读取外设所有register的值
	i2cget – 读取外设某个register的值
	i2cset – 向外设某个register写入值
	i2ctransfer –读写i2c设备的数据 -4.0版本添加

帮助信息
i2ctransfer –help信息                                    
Usage: i2ctransfer [-f] [-y] [-v] [-V] I2CBUS DESC [DATA] [DESC [DATA]]...
  I2CBUS is an integer or an I2C bus name
  DESC describes the transfer in the form: {r|w}LENGTH[@address]
    1) read/write-flag  2) LENGTH (range 0-65535)  3) I2C address (use last one if omitted)
  DATA are LENGTH bytes for a write message. They can be shortened by a suffix:
    = (keep value constant until LENGTH)    //写入LENGTH个相同的数据
    + (increase value by 1 until LENGTH)     //写入LENTH个数据，数据递加
		- (decrease value by 1 until LENGTH)    //写入LENTH个数据，数据递减
p (use pseudo random generator until LENGTH with value as seed)   //写入随机数

Example (bus 0, read 8 byte at offset 0x64 from EEPROM at 0x50):
	# i2ctransfer 0 w1@0x50 0x64 r8
Example (same EEPROM, at offset 0x42 write 0xff 0xfe ... 0xf0):
	# i2ctransfer 0 w17@0x50 0x42 0xff-
	eg：# i2ctransfer -f -y 1 w1@0x33 0x55 r5
	0x67 0x76 0x30 0x30 0x32

-f 强制执行，否则会提示Device or resource busy
-y 默认执行yes ，否则会提示确认执行Continue? [Y/n] Y

i2cdetect ，i2cdump ，i2cget ，i2cset不带参数执行时会显示对应的帮助信息，可参考。
	例：列举i2c总线
	i2cdetect -l
	列举 I2C bus i2c-1 上面连接的所有i2c设备
	
	i2cdetect -y 1
	如：读取I2C 设备(地址为0x33)寄存器0x55的值，W表示读取长度为一个word，默认为一个字节
	i2cget -y -f 1 0x33 0x55 w                          
	0x7667
	
	设置 I2C 设备(地址为0x33)寄存器0x03的值为0x05
	# i2cset -y -f 1 0x33 0x03 0x05
	dump I2C 读取外设(地址为0x33)的所有寄存器值
	i2cdump -y -f 1 0x33

参考资料：
	http://blog.csdn.net/lqxandroid2012/article/details/48527887

================================================================================


小新，晓彬：

清明加班安排财哥对应，有问题请联络

电话：13898470481

以上

================================================================================
端子定义疑问：
217	E01_I2C_SCL0	1	YES	I2C1_3V3	CONT_I2C1_3V3	Output			GPIO48	B1:SCL0	
218	E01_I2C_SDA0	1	YES	MCU	E01_NR-3V3-CONT	Output			GPIO47	B1:SDA0	

================================================================================
947测试模式：
	i2cset -f -y 0x01 0x0c 0x65 0x10
	i2cset -f -y 0x01 0x0c 0x64 0x05


	i2cset -f -y 0x01 0x0c 0x65 0x11
	i2cset -f -y 0x01 0x0c 0x64 0x01

	i2c_rw op=write bus-id=0x2 dev-id=0x38 addr=0x65 data=0x11
	i2c_rw op=write bus-id=0x2 dev-id=0x38 addr=0x64 data=0x01

================================================================================

Touch：
	947的INTB端子为中断端子，无touch事件发生时为高电平，当存在touch事件时，为低电平。
	读取0xC7寄存器，可以清空947中断，拉高947的INTB端子。

================================================================================
9992：
	寄存器：
	0X03状态寄存器：01101000


================================================================================

962通道切换：
	
	AVM：
		TI962_write_cmos_sensor(0x0C, 0x04); // port2 AVM
		TI962_write_cmos_sensor(0x4C, 0x24); // port2 AVM
		TI962_write_cmos_sensor(0x20, 0xB0); // port2 AVM
	
	DVR：
		TI962_write_cmos_sensor(0x0C, 0x08); // port3 DVR
		TI962_write_cmos_sensor(0x4C, 0x38); // port3 DVR
		TI962_write_cmos_sensor(0x20, 0x70); // port3 DVR
	
	BSD：
		TI962_write_cmos_sensor(0x0C, 0x02); // port1 BSD
		TI962_write_cmos_sensor(0x4C, 0x12); // port1 BSD	
		TI962_write_cmos_sensor(0x20, 0xD0); // port1 BSD

查看当前通道：


Lock状态：
	0x4D 
	bit0 : 1 lock 
		   0 unlock
	bit1 : 1 met PASS criteria
		   0 not meet PASS criteria
		   

1280*720分辨率测试模式：		   
	i2cset -f -y 0x02 0x30 0x33  0x01
	i2cset -f -y 0x02 0x30 0xB0  0x00
	i2cset -f -y 0x02 0x30 0xB1  0x01
	i2cset -f -y 0x02 0x30 0xB2  0x01
	i2cset -f -y 0x02 0x30 0xB1  0x02
	i2cset -f -y 0x02 0x30 0xB2  0x33
	i2cset -f -y 0x02 0x30 0xB1  0x03
	i2cset -f -y 0x02 0x30 0xB2  0x24
	i2cset -f -y 0x02 0x30 0xB1  0x04
	i2cset -f -y 0x02 0x30 0xB2  0x0F
	i2cset -f -y 0x02 0x30 0xB1  0x05
	i2cset -f -y 0x02 0x30 0xB2  0x00
	i2cset -f -y 0x02 0x30 0xB1  0x06
	i2cset -f -y 0x02 0x30 0xB2  0x01
	i2cset -f -y 0x02 0x30 0xB1  0x07
	i2cset -f -y 0x02 0x30 0xB2  0xE0
	i2cset -f -y 0x02 0x30 0xB1  0x08
	i2cset -f -y 0x02 0x30 0xB2  0x02
	i2cset -f -y 0x02 0x30 0xB1  0x09
	i2cset -f -y 0x02 0x30 0xB2  0xD0
	i2cset -f -y 0x02 0x30 0xB1  0x0A
	i2cset -f -y 0x02 0x30 0xB2  0x04
	i2cset -f -y 0x02 0x30 0xB1  0x0B
	i2cset -f -y 0x02 0x30 0xB2  0x1A
	i2cset -f -y 0x02 0x30 0xB1  0x0C
	i2cset -f -y 0x02 0x30 0xB2  0x0C
	i2cset -f -y 0x02 0x30 0xB1  0x0D
	i2cset -f -y 0x02 0x30 0xB2  0x67
	i2cset -f -y 0x02 0x30 0xB1  0x0E
	i2cset -f -y 0x02 0x30 0xB2  0x21
	i2cset -f -y 0x02 0x30 0xB1  0x0F
	i2cset -f -y 0x02 0x30 0xB2  0x0A
	
	


1920*720的测试模式：
	i2cset -f -y 0x02 0x30 0x33 0x01
	i2cset -f -y 0x02 0x30 0xB0 0x00
	i2cset -f -y 0x02 0x30 0xB1 0x01
	i2cset -f -y 0x02 0x30 0xB2 0x01
	i2cset -f -y 0x02 0x30 0xB1 0x02
	i2cset -f -y 0x02 0x30 0xB2 0x33
	i2cset -f -y 0x02 0x30 0xB1 0x03
	i2cset -f -y 0x02 0x30 0xB2 0x24
	i2cset -f -y 0x02 0x30 0xB1 0x04
	i2cset -f -y 0x02 0x30 0xB2 0x16
	i2cset -f -y 0x02 0x30 0xB1 0x05
	i2cset -f -y 0x02 0x30 0xB2 0x80
	i2cset -f -y 0x02 0x30 0xB1 0x06
	i2cset -f -y 0x02 0x30 0xB2 0x02
	i2cset -f -y 0x02 0x30 0xB1 0x07
	i2cset -f -y 0x02 0x30 0xB2 0xD0
	i2cset -f -y 0x02 0x30 0xB1 0x08
	i2cset -f -y 0x02 0x30 0xB2 0x02
	i2cset -f -y 0x02 0x30 0xB1 0x09
	i2cset -f -y 0x02 0x30 0xB2 0xD0
	i2cset -f -y 0x02 0x30 0xB1 0x0A
	i2cset -f -y 0x02 0x30 0xB2 0x04
	i2cset -f -y 0x02 0x30 0xB1 0x0B
	i2cset -f -y 0x02 0x30 0xB2 0x1A
	i2cset -f -y 0x02 0x30 0xB1 0x0C
	i2cset -f -y 0x02 0x30 0xB2 0x0C
	i2cset -f -y 0x02 0x30 0xB1 0x0D
	i2cset -f -y 0x02 0x30 0xB2 0x67
	i2cset -f -y 0x02 0x30 0xB1 0x0E
	i2cset -f -y 0x02 0x30 0xB2 0x21
	i2cset -f -y 0x02 0x30 0xB1 0x0F
	i2cset -f -y 0x02 0x30 0xB2 0x0A

	
	line count：
	寄存器地址    :0x73（高） 0x74（低）
	寄存器值16进制:02         cf 
	十进制        :719

	linelenth:
	寄存器地址    :0x75（高） 0x76（低）
	寄存器值16机制:0a         00
	十进制        :2560
	
	上面获取的为962接受到的字节，因yuv格式一个像素两个字节，因此，分辨率为：1280*719
		
================================================================================
	下线配置：
	
	AVM： 选HIGH_XXX开头的， 101配置中0字节为0x69的
高清RVC：选MID_XXX开头的，101配置中0字节为0x66的
标清RVC:选MID_XXX开头的，101配置中0字节为0x67(需要手动修改)，110配置中5字节为0x00的


AVM    ：reverse 3
高清RVC：reverse 5
标清RVC：reverse 9

================================================================================

Camera Hal：


preview：
	core/camnode/pass2node.preview.cpp
	core/camnode/ICamGraphNode.cpp

	hal/aaa/aaa_hal_if.cpp
		MIPI接口
		setSeninf1NCSI2



        if(!(( SENINF_READ_REG(pSeninf,MIPI_RX_CON44_CSI0)& 0x10001) && (SENINF_READ_REG(pSeninf,MIPI_RX_CON48_CSI0) & 0x101))){
         LOG_ERR("CSI-0 calibration failed!, NCSI2Config Reg 0x44=0x%x, 0x48=0x%x\n",SENINF_READ_REG(pSeninf,MIPI_RX_CON44_CSI0),SENINF_READ_REG(pSeninf,MIPI_RX_CON48_CSI0));
         //ret = -1;
        }

	重要文件路径：
	modified:   ../../../hardware/mtkcam/v1/test/inc/CamLog.h
	modified:   mtkcam/D1/core/featureio/pipe/aaa/aaa_hal_yuv.cpp
	modified:   mtkcam/D1/hal/sensor/HalSensor.control.cpp
	modified:   mtkcam/D1/hal/sensor/HalSensorList.openList.cpp
	modified:   mtkcam/D1/hal/sensor/seninf_drv.cpp

	//MIPI设置相关
	HalSensor.control.cpp
		MINT HalSensor::seninfControl(MUINT8 enable, MUINT32 currSensorDev)    // 根据meSensorDev，设置MIPI口；sensorPara摄像头参数
			
			seninf_drv.cpp
			int SeninfDrvImp::setSeninf1NCSI2(
				unsigned long dataTermDelay, unsigned long dataSettleDelay,
				unsigned long clkTermDelay, unsigned long vsyncType,
				unsigned long dlaneNum, unsigned long ncsi2En,
				unsigned long dataheaderOrder, unsigned long mipi_type,
				unsigned long HSRXDE, unsigned long dpcm
			)
	



	startpreview：
	
		路径：
			vendor/mediatek/proprietary/platform/mt6735/hardware/mtkcam/D1/v1/adapter/MtkStereo
		
		MtkStereoCamAdapter.h
		platform/mt6735/hardware/mtkcam/D1/v1/adapter/MtkStereo/MtkStereoCamAdapter.Preview.cpp
		
		Capture：
		MtkStereoCamAdapter.Capture.cpp
		
		
	hardware/mtkcam/module_hal/devicemgr/CamDeviceManagerBase.cpp:197:        mi4DeviceNum = enumDeviceLocked();
	
	
	DVR Camera：
	1.
		http://10.1.55.31:8088/#/c/1299/
		在device/pvetec/e01_base/ProjectConfig.mk中配置
			CUSTOM_HAL_IMGSENSOR = ti962_mipi_yuv
			CUSTOM_HAL_MAIN_IMGSENSOR = ti962_mipi_yuv
			CUSTOM_KERNEL_IMGSENSOR = ti962_mipi_yuv
			CUSTOM_KERNEL_MAIN_IMGSENSOR = ti962_mipi_yuv
	2。
		在vendor/mediatek/proprietary/custom/emx8816aa/hal/imgsensor_src/sensorlist.cpp添加芯片驱动信息
		MSDK_SENSOR_INIT_FUNCTION_STRUCT SensorList[]
			#if defined(TI962_MIPI_YUV)
				YUV_INFO(TI962_SENSOR_ID, SENSOR_DRVNAME_TI962_YUV, NULL),
			#endif
	
	devicemgr/CamDeviceManagerImp.cpp:222:    size_t const sensorNum = pHalSensorList->searchSensors();	
	hal/sensor/HalSensorList.cpp:132:    return  enumerateSensor_Locked();
		MVOID HalSensorList::querySensorDrvInfo()
	
	
	
	hal/sensor/HalSensorList.enumList.cpp:180:    int const iSensorsList = pSensorDrv->impSearchSensor(NULL);
	hal/sensor/imgsensor_drv.cpp:147:ImgSensorDrv::impSearchSensor(pfExIdChk pExIdChkCbf)
	hal/sensor/imgsensor_drv.cpp:189:    GetSensorInitFuncList(&m_pstSensorInitFunc);            
		//将driver_list赋值为m_pstSensorInitFunc
		//在该函数中打开设备节点：kd_camera_hw
		// 需要找到地方设置 MTK_SUB_IMGSENSOR ？？？？？
				#ifdef MTK_MAIN2_IMGSENSOR

					LOG_ERR("[impSearchSensor]: MTK_MAIN2_IMGSENSOR qinxb \n");
					for (SensorEnum = DUAL_CAMERA_MAIN_SENSOR; SensorEnum <= DUAL_CAMERA_MAIN_2_SENSOR; SensorEnum <<= 1)  {
						LOG_MSG("impSearchSensor search to main_2\n");
				#else
				   #ifdef MTK_SUB_IMGSENSOR
					LOG_ERR("[impSearchSensor]: MTK_SUB_IMGSENSOR qinxb \n");
					for (SensorEnum = DUAL_CAMERA_MAIN_SENSOR; SensorEnum <= DUAL_CAMERA_SUB_SENSOR; SensorEnum <<= 1)  {
						LOG_MSG("impSearchSensor search to sub\n");
				   #else
				   LOG_ERR("[impSearchSensor]: Else qinxb \n");
					for (SensorEnum = DUAL_CAMERA_MAIN_SENSOR; SensorEnum < DUAL_CAMERA_SUB_SENSOR; SensorEnum <<= 1)  {
						LOG_MSG("impSearchSensor search to main\n");
				   #endif
				#endif
		
		//  id[KDIMGSENSOR_INVOKE_DRIVER_0] = (SensorEnum << KDIMGSENSOR_DUAL_SHIFT) | i; //仅设置了驱动0，未设置驱动1，该处需要修改？？？？？
		
	imgsensor_src/sensorlist.cpp:409:UINT32 GetSensorInitFuncList(MSDK_SENSOR_INIT_FUNCTION_STRUCT **ppSensorList)

	
	
	
	
	驱动全局变量：
		 g_invokeSocketIdx[0] = 0x01  // 962
		 g_invokeSocketIdx[1] = 0x02  // 9992
		 
		 drvIdx[0] = 0x00   //第一个驱动
		 drvIdx[1] = 0x01   //第二个驱动
		 
		 g_pInvokeSensorFunc[0] = SensorFuncTI962 // 962提供的函数 
		 g_pInvokeSensorFunc[1] = SensorFunc9992  // 9992提供的函数
		 
		 g_invokeSensorNameStr[0] = ti962_mipi_yuv
		 g_invokeSensorNameStr[1] = 9992_cvbs_yuv
		 
		 g_bEnableDriver[0] = TRUE;
		 g_bEnableDriver[1] = TRUE;
		 
		 
	HalSensorList.enumList.cpp	 
		HalSensorList::enumerateSensor_Locked()
			imgsensor_drv.cpp
			ImgSensorDrv::impSearchSensor(pfExIdChk pExIdChkCbf)
			
================================================================================
InstantCam：
	instantcam.c:1048:    init_camio();
		p1_camio.cpp:513:    IHalSensorList* const pHalSensorList = IHalSensorList::get();
			D1/hal/sensor/HalSensorList.cpp:87:    return HalSensorList::singleton();
		p1_camio.cpp:712:    pHalSensorList->searchSensors();
			D1/hal/sensor/HalSensorList.cpp:127:searchSensors()
				D1/hal/sensor/HalSensorList.cpp:132:    return  enumerateSensor_Locked();
					D1/hal/sensor/HalSensorList.enumList.cpp:138:enumerateSensor_Locked()
						D1/hal/sensor/imgsensor_drv.cpp:52:    return ImgSensorDrv::singleton();
							D1/hal/sensor/imgsensor_drv.cpp:147:ImgSensorDrv::impSearchSensor(pfExIdChk pExIdChkCbf)
								D1/hal/sensor/imgsensor_drv.cpp:189:    GetSensorInitFuncList(&m_pstSensorInitFunc);
								    sprintf(cBuf,"/dev/%s",CAMERA_HW_DEVNAME); //kd_camera_hw
									m_fdSensor = ::open(cBuf, O_RDWR);
									
									ioctl(m_fdSensor, KDIMGSENSORIOC_X_SET_DRIVER,&id[KDIMGSENSOR_INVOKE_DRIVER_0] ); //
						
						D1/hal/sensor/HalSensorList.enumList.cpp:183:    querySensorDrvInfo();
							D1/hal/sensor/HalSensorList.getInfo.cpp:91:MVOID HalSensorList::querySensorDrvInfo()
								D1/hal/sensor/imgsensor_drv.cpp:431:ImgSensorDrv::init
									     //没有看懂
										SELECT_PRIORITY_DRIVER(main,N2D_PRIORITY_DRIVER);
										//SELECT_PRIORITY_DRIVER(main2,N2D_PRIORITY_DRIVER);
										SELECT_PRIORITY_DRIVER(sub,N2D_PRIORITY_DRIVER);
										
										sensorDrvInit[0] = 0x00010000
										sensorDrvInit[1] = 0x00020001
										
										ioctl(m_fdSensor, KDIMGSENSORIOC_X_SET_DRIVER,sensorDrvInit);
										getResolution(pSensorResInfo);

								D1/hal/sensor/HalSensorList.getInfo.cpp:111:        pSensorDrv->getInfo2((SENSOR_DEV_ENUM)sensorDev,&sensorDrvInfo[i]);
									D1/hal/sensor/imgsensor_drv.cpp:2246:ImgSensorDrv::getInfo2(
									D1/hal/sensor/HalSensorList.getInfo.cpp:127:    querySensorInfo();//to remap data
									D1/hal/sensor/HalSensorList.getInfo.cpp:226:MVOID HalSensorList::querySensorInfo()
								
								
						
						
								
extern "C" int init_camio(){


================================================================================


D/ImgSensorDrv( 2510): [impSearchSensor]set sensor driver id =10000
D/ImgSensorDrv( 2510): [impSearchSensor]set sensor driver id =10001
D/ImgSensorDrv( 2510): [impSearchSensor]set sensor driver id =20000
D/ImgSensorDrv( 2510): [impSearchSensor]set sensor driver id =20001

kdSetDriver（10000）
kdSetDriver（10001）
kdSetDriver（20000）
kdSetDriver（20001）


[    7.657284]<1>.(0)[161:instantcam][kd_sensorlist][kdSetDriver] pDrvIndex:0x00010000/0x00000000
[    7.674572]<1>.(1)[161:instantcam][kd_sensorlist][kdSetDriver] pDrvIndex:0x00010001/0x7665642f
[    7.701291]<1>.(1)[161:instantcam][kd_sensorlist][kdSetDriver] pDrvIndex:0x00020000/0x00010001
[    7.734871]<1>.(1)[161:instantcam][kd_sensorlist][kdSetDriver] pDrvIndex:0x00020001/0x7665642f

[    7.765486]<1>.(1)[161:instantcam][kd_sensorlist][kdSetDriver] pDrvIndex:0x00010000/0x00000000
[   11.745683]<3>.(3)[256:mediaserver][kd_sensorlist][kdSetDriver] pDrvIndex:0x00010000/0x00000000
[   11.779492]<0>.(0)[256:mediaserver][kd_sensorlist][kdSetDriver] pDrvIndex:0x00010001/0x7665642f
[   11.831151]<3>.(3)[256:mediaserver][kd_sensorlist][kdSetDriver] pDrvIndex:0x00020000/0x00010001
[   11.879337]<1>.(1)[256:mediaserver][kd_sensorlist][kdSetDriver] pDrvIndex:0x00020001/0x7665642f

[   12.003494]<3>.(1)[256:mediaserver][kd_sensorlist][kdSetDriver] pDrvIndex:0x00010000/0x00000000
[   12.005087]<3>.(1)[256:mediaserver][kd_sensorlist][kdSetDriver] pDrvIndex:0x00010000/0x00000000


================================================================================
复位947：
	// pull down 947 pdb
	echo -wdout 43 0 > /sys/devices/virtual/misc/mtgpio/pin
	sleep 1
	echo -wdout 43 1 > /sys/devices/virtual/misc/mtgpio/pin

	i2cset -f -y 0x01 0x0c 0x03  0xda
	i2cset -f -y 0x01 0x0c 0x04  0x90
	i2cset -f -y 0x01 0x0c 0x06  0x58
	i2cset -f -y 0x01 0x0c 0x07  0x34
	i2cset -f -y 0x01 0x0c 0x08  0x34
	i2cset -f -y 0x01 0x0c 0x0E  0x30
	i2cset -f -y 0x01 0x0c 0x0F  0x03
	i2cset -f -y 0x01 0x0c 0xC6  0x21
	i2cset -f -y 0x01 0x0c 0x4f  0xC0


DSI84：

	echo -wdout 126 0 > /sys/devices/virtual/misc/mtgpio/pin
	sleep 1
	echo -wdout 126 1 > /sys/devices/virtual/misc/mtgpio/pin

	i2cset -f -y 0x01 0x2d	 0x09   0x00
	i2cset -f -y 0x01 0x2d	 0x0A   0x07
	i2cset -f -y 0x01 0x2d	 0x0B   0x10
	i2cset -f -y 0x01 0x2d	 0x0D   0x00
	i2cset -f -y 0x01 0x2d	 0x10   0x26
	i2cset -f -y 0x01 0x2d	 0x11   0x00
	i2cset -f -y 0x01 0x2d	 0x12   0x36
	i2cset -f -y 0x01 0x2d	 0x13   0x00
	i2cset -f -y 0x01 0x2d	 0x18   0x78
	i2cset -f -y 0x01 0x2d	 0x19   0x00
	i2cset -f -y 0x01 0x2d	 0x1A   0x03
	i2cset -f -y 0x01 0x2d	 0x1B   0x00
	i2cset -f -y 0x01 0x2d	 0x20   0x80
	i2cset -f -y 0x01 0x2d	 0x21   0x07
	i2cset -f -y 0x01 0x2d	 0x22   0x00
	i2cset -f -y 0x01 0x2d	 0x23   0x00
	i2cset -f -y 0x01 0x2d	 0x24   0x00
	i2cset -f -y 0x01 0x2d	 0x25   0x00
	i2cset -f -y 0x01 0x2d	 0x26   0x00
	i2cset -f -y 0x01 0x2d	 0x27   0x00
	i2cset -f -y 0x01 0x2d	 0x28   0x21
	i2cset -f -y 0x01 0x2d	 0x29   0x00
	i2cset -f -y 0x01 0x2d	 0x2A   0x00
	i2cset -f -y 0x01 0x2d	 0x2B   0x00
	i2cset -f -y 0x01 0x2d	 0x2C   0x10
	i2cset -f -y 0x01 0x2d	 0x2D   0x00
	i2cset -f -y 0x01 0x2d	 0x2E   0x00
	i2cset -f -y 0x01 0x2d	 0x2F   0x00
	i2cset -f -y 0x01 0x2d	 0x30   0x02
	i2cset -f -y 0x01 0x2d	 0x31   0x00
	i2cset -f -y 0x01 0x2d	 0x32   0x00
	i2cset -f -y 0x01 0x2d	 0x33   0x00
	i2cset -f -y 0x01 0x2d	 0x34   0x18
	i2cset -f -y 0x01 0x2d	 0x35   0x00
	i2cset -f -y 0x01 0x2d	 0x36   0x00
	i2cset -f -y 0x01 0x2d	 0x37   0x00
	i2cset -f -y 0x01 0x2d	 0x38   0x00
	i2cset -f -y 0x01 0x2d	 0x39   0x00
	i2cset -f -y 0x01 0x2d	 0x3A   0x00
	i2cset -f -y 0x01 0x2d	 0x3B   0x00
	i2cset -f -y 0x01 0x2d	 0x3C   0x00
	i2cset -f -y 0x01 0x2d	 0x3D   0x00
	i2cset -f -y 0x01 0x2d	 0x3E   0x00
	i2cset -f -y 0x01 0x2d	 0x0D   0x01
	i2cset -f -y 0x01 0x2d	 0x09   0x01

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================
